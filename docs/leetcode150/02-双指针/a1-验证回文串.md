# 验证回文串

如果在将所有大写字符转换为小写字符、并移除所有非字母数字字符之后，短语正着读和反着读都一样。

则可以认为该短语是一个 回文串 。

字母和数字都属于字母数字字符。

给你一个字符串 `s`，如果它是 回文串 ，返回 `true` ；否则，返回 `false` 。

### 示例 1：

输入: `s = "A man, a plan, a canal: Panama"`

输出：`true`

解释：`"amanaplanacanalpanama"` 是回文串。

### 示例 2：

输入：`s = "race a car"`

输出：`false`

解释：`"raceacar"` 不是回文串。

### 示例 3：

输入：`s = " "`

输出：`true`

解释：在移除非字母数字字符之后，`s` 是一个空字符串 `""` 。

由于空字符串正着反着读都一样，所以是回文串。

## Problem Solving 1

### ideas

1. 使用 左右两个指针，分别从字符串首尾向中间移动

2. 指针遇到 非字母数字字符直接跳过，不参与比较

3. 对参与比较的字符 统一转成小写，忽略大小写差异

4. 每次比较左右字符：

不相等 → 立刻返回 `false`

相等 → 指针继续向中间收缩

5. 指针相遇或交叉仍未出现不相等，说明字符串是回文串，返回 `true`

### code

```js
/**
 * @param {string} s
 * @return {boolean}
 */
```

```js
var isPalindrome = function (s) {
  // 1️⃣ 定义左右指针，分别指向字符串的开头和结尾
  let left = 0;
  let right = s.length - 1;

  // 2️⃣ 工具函数：判断一个字符是否为「字母或数字」
  // 利用 ASCII 码范围判断，避免使用正则，提高可控性
  const isAlphaNum = (ch) => {
    const code = ch.charCodeAt(0);
    return (
      (code >= 48 && code <= 57) || // 数字 0-9
      (code >= 65 && code <= 90) || // 大写字母 A-Z
      (code >= 97 && code <= 122) // 小写字母 a-z
    );
  };

  // 3️⃣ 当左右指针未相遇时，持续向中间收缩
  while (left < right) {
    // 3.1 左指针跳过所有非字母数字字符
    while (left < right && !isAlphaNum(s[left])) {
      left++;
    }

    // 3.2 右指针跳过所有非字母数字字符
    while (left < right && !isAlphaNum(s[right])) {
      right--;
    }

    // 3.3 此时 left 和 right 都指向有效字符，进行比较
    // 统一转成小写，忽略大小写差异
    if (s[left].toLowerCase() !== s[right].toLowerCase()) {
      return false; // 只要有一对不相等，就不是回文串
    }

    // 3.4 当前字符匹配成功，指针继续向中间移动
    left++;
    right--;
  }

  // 4️⃣ 所有字符都成功匹配，说明是回文串
  return true;
};
```
