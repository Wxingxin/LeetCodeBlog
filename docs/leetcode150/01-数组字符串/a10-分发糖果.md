# 分发糖果

## 题目

`n` 个孩子站成一排。给你一个整数数组 `ratings` 表示每个孩子的评分。

你需要按照以下要求，给这些孩子分发糖果：

每个孩子至少分配到 `1` 个糖果。

相邻两个孩子中，评分更高的那个会获得更多的糖果。

请你给每个孩子分发糖果，计算并返回需要准备的 最少糖果数目 。

### 示例 1：

输入：`ratings = [1,0,2]`

输出：`5`

解释：你可以分别给第一个、第二个、第三个孩子分发`2、1、2`颗糖果。

### 示例 2：

输入：`ratings = [1,2,2]`

输出：`4`

解释：你可以分别给第一个、第二个、第三个孩子分发 1、2、1 颗糖果。
第三个孩子只得到 1 颗糖果，这满足题面中的两个条件。

##

## 6）分发糖果（两次遍历：左规则 + 右规则取 max）

### 思路总结

要同时满足“比左邻居高”和“比右邻居高”：

- 先左 → 右：如果 `ratings[i] > ratings[i-1]`，那 `candies[i] = candies[i-1] + 1`
- 再右 → 左：如果 `ratings[i] > ratings[i+1]`，那 `candies[i] = max(candies[i], candies[i+1] + 1)`
- 最后求和

### JS 代码（含注释）

```js
/**
 * @param {number[]} ratings
 * @return {number}
 */
var candy = function (ratings) {
  const n = ratings.length;
  const candies = new Array(n).fill(1); // 每人先发 1 颗

  // 1) 左 -> 右：满足“比左边评分高，就比左边糖多”
  for (let i = 1; i < n; i++) {
    if (ratings[i] > ratings[i - 1]) {
      candies[i] = candies[i - 1] + 1;
    }
  }

  // 2) 右 -> 左：满足“比右边评分高，就比右边糖多”
  for (let i = n - 2; i >= 0; i--) {
    if (ratings[i] > ratings[i + 1]) {
      candies[i] = Math.max(candies[i], candies[i + 1] + 1);
    }
  }

  // 3) 求和
  let sum = 0;
  for (const c of candies) sum += c;
  return sum;
};
```

### 结合案例

- ratings=[1,0,2]

  - 初始 candies=[1,1,1]
  - 左 → 右：i=1(0>1❌), i=2(2>0✅) → [1,1,2]
  - 右 → 左：i=1(0>2❌), i=0(1>0✅) → candies[0]=max(1,1+1)=2 → [2,1,2]
  - sum=5 ✅

---

如果你想练“面试能讲出来”的版本：我也可以给你每题一段**30 秒口述模板**（怎么解释为什么这样贪心/为什么 O(1)）。
