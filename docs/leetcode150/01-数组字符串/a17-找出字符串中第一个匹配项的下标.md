# 找出字符串中第一个匹配项的下标
## 题目

给你两个字符串 `haystack` 和 `needle` ，请你在 `haystack` 字符串中找出 `needle` 字符串的第一个匹配项的下标（下标从 0 开始）。

如果 `needle` 不是 `haystack` 的一部分，则返回  `-1` 。

 

### 示例 1：

输入：`haystack = "sadbutsad", needle = "sad"`

输出：`0`

解释：`"sad"` 在下标 `0` 和 `6` 处匹配。

第一个匹配项的下标是 `0` ，所以返回 `0` 。
### 示例 2：

输入：`haystack = "leetcode", needle = "leeto"`

输出：`-1`

解释：`"leeto"` 没有在 `"leetcode"` 中出现，所以返回 `-1` 。

## 
这题是 **LeetCode · 找出字符串中第一个匹配项的下标（strStr / Implement strStr）**，字符串基础中的**核心题**，面试出现频率极高。

我给你 **三层解法**，从**必会 → 加分 → 进阶**，你按需要掌握。

---

## ✅ 解法一（必会）：**暴力匹配（双指针）**

### 核心思路

* 枚举 `haystack` 中每一个可能的起点
* 从该位置开始逐字符对比 `needle`
* 一旦不匹配就换下一个起点
* 全匹配则返回下标

---

### ✅ JS 标准代码（面试最常用）

```js
/**
 * @param {string} haystack
 * @param {string} needle
 * @return {number}
 */
var strStr = function(haystack, needle) {
  // 约定：needle 为空，返回 0
  if (needle === "") return 0;

  const n = haystack.length;
  const m = needle.length;

  // haystack 中最多比较到 n - m
  for (let i = 0; i <= n - m; i++) {
    let j = 0;

    // 比较 needle
    while (j < m && haystack[i + j] === needle[j]) {
      j++;
    }

    // 全部匹配
    if (j === m) return i;
  }

  return -1;
};
```

---

## 🧠 示例拆解（`"sadbutsad"` + `"sad"`）

* `i = 0`：

  * `s === s`
  * `a === a`
  * `d === d` ✅
* 返回 `0`

---

## ⏱️ 复杂度分析

* **时间复杂度**：`O(n * m)`
* **空间复杂度**：`O(1)`

---

## 🧩 解法二（了解即可）：直接用 JS 内置

```js
var strStr = function(haystack, needle) {
  return haystack.indexOf(needle);
};
```

✔️ 实用
❌ 面试可能被追问「不用内置你怎么写？」

---

## 🧩 解法三（进阶加分）：KMP（了解思想即可）

### 核心点

* 利用 **前缀表（next 数组）**
* 避免重复比较
* 时间复杂度降到 `O(n + m)`

👉 **一般不会要求你手写**，但你可以这样说：

> “暴力是 O(nm)，如果优化可以用 KMP，把时间降到 O(n+m)。”

这句话 **很加分**。

---

## 📌 面试官最想听的边界处理

* `needle === ""` → 返回 `0`
* `needle.length > haystack.length` → 返回 `-1`

---

## 🧠 和前面字符串题的关系

| 题目         | 核心能力     |
| ---------- | -------- |
| 最后一个单词长度   | 指针控制     |
| 最长公共前缀     | 前缀判断     |
| 反转单词顺序     | 分割 / 扫描  |
| Z 字形变换     | 状态切换     |
| **strStr** | **子串匹配** |

👉 这是 **字符串题的中枢**。

---

## 🧠 一句话总结

> **枚举起点，对齐逐个比，全部对上就返回。**

如果你愿意，我可以：

* 给你 **KMP 的“人话版”推导**
* 或整理一套 **字符串面试高频 10 题速刷路线**
* 或给你 **这题的手写陷阱总结**

你选一个，我继续陪你刷 🚀
