# Z 字形变换
## 题目

将一个给定字符串 `s` 根据给定的行数 `numRows `，以从上往下、从左到右进行 `Z` 字形排列。

比如输入字符串为 `"PAYPALISHIRING"`行数为 `3` 时，排列如下：
```js
P   A   H   N
A P L S I I G
Y   I   R
```
之后，你的输出需要从左往右逐行读取，产生出一个新的字符串，比如：`"PAHNAPLSIIGYIR"`。

请你实现这个将字符串进行指定行数变换的函数：

`string convert(string s, int numRows);`
 

### 示例 1：

输入：`s = "PAYPALISHIRING", numRows = 3`

输出：`"PAHNAPLSIIGYIR"`
### 示例 2：
输入：`s = "PAYPALISHIRING", numRows = 4`

输出：`"PINALSIGYAHRPI"`

解释：
```js
P     I    N
A   L S  I G
Y A   H R
P     I
```
### 示例 3：

输入：`s = "A", numRows = 1`

输出：`"A"`

## 

这题是 **LeetCode · Z 字形变换（Zigzag Conversion）**，中等题，但**本质并不难**，核心就是 **“方向切换”**。

我按你刷题/面试最需要的方式来讲：
👉 **先给标准写法（最稳） → 再给思路拆解 → 再给进阶理解**

---

## ✅ 核心思路（模拟走 Z）

你可以把它想成：

* 有 `numRows` 行
* 用一个指针 `row` 表示当前在哪一行
* 用一个方向 `dir` 表示：

  * `+1`：向下
  * `-1`：向上
* 每读一个字符：

  * 放进当前行
  * 行号按方向变化
* 到 **顶行 / 底行** 时，方向反转

---

## ✅ JS 标准解法（面试首选）

```js
/**
 * @param {string} s
 * @param {number} numRows
 * @return {string}
 */
var convert = function(s, numRows) {
  // 特殊情况：一行或行数大于字符串长度
  if (numRows === 1 || numRows >= s.length) return s;

  // 1. 初始化每一行
  const rows = new Array(numRows).fill("").map(() => "");

  let row = 0;      // 当前行
  let dir = 1;      // 方向：1 向下，-1 向上

  // 2. 遍历字符串
  for (let ch of s) {
    rows[row] += ch;

    // 3. 到顶 / 底，改变方向
    if (row === 0) dir = 1;
    if (row === numRows - 1) dir = -1;

    row += dir;
  }

  // 4. 拼接所有行
  return rows.join("");
};
```

---

## 🧠 示例拆解（`s = "PAYPALISHIRING", numRows = 3`）

行变化轨迹：

```
row: 0 → 1 → 2 → 1 → 0 → 1 → 2 → ...
```

填充过程：

```
row 0: P   A   H   N
row 1: A P L S I I G
row 2: Y   I   R
```

拼接：

```
"PAHN" + "APLSIIG" + "YIR"
```

---

## ⏱️ 复杂度分析

* **时间复杂度**：`O(n)`
* **空间复杂度**：`O(n)`（保存行）

---

## 🧩 面试官常追问：为什么要特判 `numRows === 1`？

因为：

* 如果只有一行
* Z 字形不存在
* 否则 `row` 会在 0 和 -1 之间来回出 bug

👉 **这是必写边界条件**

---

## 🧠 进阶理解（不用写代码）

Z 字形其实是一个 **周期运动**：

* 一个周期长度：`cycle = 2 * numRows - 2`
* 每个字符可以算自己属于哪一行

但：

* 数学法 **难写、易错**
* 面试不如模拟直观

👉 **能写对模拟法，已经完全够用**

---

## 🧠 一句话总结

> **用一个行指针 + 一个方向，在行数组里来回走。**

---

如果你愿意，我可以：

* 给你 **“数学周期法”写法（高阶）**
* 或把这题和 **二维数组/指针切换** 串成一个模板
* 或直接出一题 **Z 字形变种面试题** 给你练

你选一个，我继续陪你刷 🚀
