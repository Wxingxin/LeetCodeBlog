# é¢˜

ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œ æ£€æŸ¥å®ƒæ˜¯å¦è½´å¯¹ç§°ã€‚

### ç¤ºä¾‹ 1ï¼š

![](./img/d1.png)

è¾“å…¥ï¼š`root = [1,2,2,3,4,4,3]`

è¾“å‡ºï¼š`true`

### ç¤ºä¾‹ 2ï¼š

![](./img/d2.png)

è¾“å…¥ï¼š`root = [1,2,2,null,3,null,3]`

è¾“å‡ºï¼š`false`

# è§£é¢˜

## æ€è·¯ï¼ˆå…³é”®æ€æƒ³ï¼‰

è®¾ä¸€ä¸ªå‡½æ•° `isMirror(left, right)` åˆ¤æ–­**ä¸¤æ£µå­æ ‘æ˜¯å¦äº’ä¸ºé•œåƒ**ã€‚

å¯¹äº `left` å’Œ `right`ï¼Œè¦å¯¹ç§°ï¼Œå¿…é¡»åŒæ—¶æ»¡è¶³ï¼š

1. ä¸¤ä¸ªèŠ‚ç‚¹çš„å€¼ç›¸åŒï¼š`left.val === right.val`
2. å·¦è¾¹çš„å·¦å­æ ‘ å’Œ å³è¾¹çš„å³å­æ ‘ å¯¹ç§°ï¼š`isMirror(left.left, right.right)`
3. å·¦è¾¹çš„å³å­æ ‘ å’Œ å³è¾¹çš„å·¦å­æ ‘ å¯¹ç§°ï¼š`isMirror(left.right, right.left)`

å†åŠ ä¸Šå‡ ç§è¾¹ç•Œæƒ…å†µï¼š

- `left` å’Œ `right` éƒ½æ˜¯ `null`ï¼šå¯¹ç§°ï¼ˆéƒ½æ˜¯ç©ºæ ‘ï¼‰
- ä¸€ä¸ªæ˜¯ `null`ï¼Œå¦ä¸€ä¸ªä¸æ˜¯ï¼šä¸å¯¹ç§°


## code

```js
/**
 * Definition for a binary tree node.
 * function TreeNode(val, left, right) {
 *     this.val = (val===undefined ? 0 : val)
 *     this.left = (left===undefined ? null : left)
 *     this.right = (right===undefined ? null : right)
 * }
 */
/**
 * @param {TreeNode} root
 * @return {boolean}
 */
function isSymmetric(root) {
  if (!root) return true; // ç©ºæ ‘ä¹Ÿæ˜¯å¯¹ç§°çš„

  // æ£€æŸ¥å·¦å­æ ‘å’Œå³å­æ ‘æ˜¯å¦äº’ä¸ºé•œåƒ
  function isMirror(left, right) {
    // æƒ…å†µ 1ï¼šå·¦å³éƒ½ä¸ºç©º -> å¯¹ç§°
    if (!left && !right) return true;

    // æƒ…å†µ 2ï¼šä¸€ä¸ªä¸ºç©ºä¸€ä¸ªä¸ä¸ºç©º -> ä¸å¯¹ç§°
    if (!left || !right) return false;

    // æƒ…å†µ 3ï¼šå€¼ä¸ç›¸ç­‰ -> ä¸å¯¹ç§°
    if (left.val !== right.val) return false;

    // æƒ…å†µ 4ï¼šç»§ç»­å‘ä¸‹é€’å½’æ£€æŸ¥
    // å·¦çš„å·¦ vs å³çš„å³ï¼Œå·¦çš„å³ vs å³çš„å·¦
    return isMirror(left.left, right.right) && isMirror(left.right, right.left);
  }

  const result = isMirror(root.left, root.right);
  return result;
}
```

## ä¸€ã€é¢˜ç›®ç¿»è¯‘ä¸€ä¸‹

ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root`ï¼Œåˆ¤æ–­è¿™æ£µæ ‘æ˜¯ä¸æ˜¯ç»•ç€ä¸­è½´çº¿å¯¹ç§°çš„ã€‚æ¯”å¦‚ï¼š

**å¯¹ç§°ï¼š**

```
      1
    /   \
   2     2
  / \   / \
 3  4  4   3
```

**ä¸å¯¹ç§°ï¼š**

```
      1
    /   \
   2     2
    \     \
     3     3
```


## ä¸‰ã€JS ä»£ç ï¼ˆé€’å½’ï¼‰

---

## å››ã€ç»“åˆå…·ä½“æ¡ˆä¾‹èµ°ä¸€é

### æ¡ˆä¾‹ 1ï¼šå¯¹ç§°çš„æ ‘

```text
      1
    /   \
   2     2
  / \   / \
 3  4  4   3
```

æ„é€ ä¸€ä¸‹ï¼ˆä¼ªä»£ç ï¼‰ï¼š

```js
const root = new TreeNode(
  1,
  new TreeNode(2, new TreeNode(3), new TreeNode(4)),
  new TreeNode(2, new TreeNode(4), new TreeNode(3))
);
```

è°ƒç”¨ï¼š`isSymmetric(root)`

**é€’å½’è¿‡ç¨‹ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š**

1. æ£€æŸ¥ `root.left(2)` å’Œ `root.right(2)`

   - å€¼ç›¸ç­‰ -> ç»§ç»­

2. é€’å½’ 1ï¼š`isMirror(left.left(3), right.right(3))`

   - å€¼ç›¸ç­‰ï¼Œç»§ç»­å¾€ä¸‹ï¼š
   - `isMirror(3.left(null), 3.right(null))` -> ä¸¤ä¸ªéƒ½æ˜¯ `null` -> `true`
   - `isMirror(3.right(null), 3.left(null))` -> ä¸¤ä¸ªéƒ½æ˜¯ `null` -> `true`
   - æ‰€ä»¥è¿™å¯¹å­æ ‘é•œåƒ -> `true`

3. é€’å½’ 2ï¼š`isMirror(left.right(4), right.left(4))`

   - åŒæ ·è¿‡ç¨‹ï¼Œæœ€ç»ˆä¹Ÿä¼šå¾—åˆ° `true`

4. æ‰€ä»¥æ ¹èŠ‚ç‚¹å·¦å³å­æ ‘é•œåƒï¼Œæ•´æ£µæ ‘å¯¹ç§°ï¼Œå‡½æ•°è¿”å› `true`ã€‚

---

### æ¡ˆä¾‹ 2ï¼šä¸å¯¹ç§°çš„æ ‘

```
      1
    /   \
   2     2
    \     \
     3     3
```

æ„é€ ï¼š

```js
const root = new TreeNode(
  1,
  new TreeNode(2, null, new TreeNode(3)),
  new TreeNode(2, null, new TreeNode(3))
);
```

è°ƒç”¨ï¼š`isSymmetric(root)`

**é€’å½’è¿‡ç¨‹ï¼ˆå…³é”®åœ°æ–¹ï¼‰ï¼š**

1. æ£€æŸ¥ `root.left(2)` å’Œ `root.right(2)`

   - å€¼ç›¸ç­‰ -> ç»§ç»­

2. æ£€æŸ¥ `isMirror(left.left(null), right.right(3))`

   - ä¸€ä¸ªæ˜¯ `null`ï¼Œä¸€ä¸ªä¸æ˜¯ -> ç›´æ¥è¿”å› `false`
   - è¯´æ˜ç»“æ„ä¸å¯¹ç§°ï¼ˆå·¦è¾¹è¯¥æœ‰å·¦å­æ ‘å´æ²¡æœ‰ï¼‰

å› ä¸ºè¿™ä¸ª `false`ï¼Œæœ€ç»ˆæ•´æ£µæ ‘è¢«åˆ¤å®šä¸º **ä¸å¯¹ç§°**ã€‚

---

## äº”ã€å¦‚ä½•è‡ªå·±éªŒè¯

ä½ å¯ä»¥è‡ªå·±å†™å‡ ä¸ªä¾‹å­æµ‹è¯•ä¸€ä¸‹ï¼š

```js
console.log(isSymmetric(root1)); // å¯¹ç§°çš„æ ‘ -> true
console.log(isSymmetric(root2)); // ä¸å¯¹ç§°çš„æ ‘ -> false
```

ä¹Ÿå¯ä»¥è¯•ï¼š

- åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼šä¸€å®šæ˜¯å¯¹ç§°ï¼ˆå·¦ã€å³å­æ ‘éƒ½æ˜¯ nullï¼‰
- å·¦å­æ ‘æœ‰èŠ‚ç‚¹ï¼Œå³å­æ ‘æ²¡èŠ‚ç‚¹ï¼šä¸€å®šä¸å¯¹ç§°

ç›´æ¥ä¸Šâ€œé€’å½’è°ƒç”¨æ ‘â€çš„æµç¨‹å›¾ï¼Œè®©ä½ ä¸€çœ¼çœ‹æ˜ç™½æ•´å¥—é€’å½’æ˜¯æ€ä¹ˆè·‘çš„ ğŸ‘‡

---

## ä¸€ã€é¢˜ç›®ä»£ç å›é¡¾ï¼ˆæ ¸å¿ƒæ˜¯ `isMirror`ï¼‰

```js
function isSymmetric(root) {
  if (!root) return true; // ç©ºæ ‘ä¹Ÿæ˜¯å¯¹ç§°çš„

  function isMirror(left, right) {
    if (!left && !right) return true; // æƒ…å†µ 1
    if (!left || !right) return false; // æƒ…å†µ 2
    if (left.val !== right.val) return false; // æƒ…å†µ 3

    // æƒ…å†µ 4ï¼šé€’å½’æ£€æŸ¥â€œå¤–ä¾§â€å’Œâ€œå†…ä¾§â€
    return isMirror(left.left, right.right) && isMirror(left.right, right.left);
  }

  return isMirror(root.left, root.right);
}
```

æ ‘ç»“æ„ï¼š

```
      1
    /   \
   2     2
  / \   / \
 3  4  4   3
```

---

## äºŒã€ä»æ ¹å¼€å§‹çš„é€’å½’è°ƒç”¨æ ‘ï¼ˆåƒæµç¨‹å›¾ï¼‰

### Step 1ï¼šå…¥å£

```text
isSymmetric(root)
â””â”€â”€ è°ƒç”¨ isMirror(root.left, root.right)
        = isMirror(2(å·¦), 2(å³))
```

---

### Step 2ï¼šç¬¬ 1 å±‚ isMirror è°ƒç”¨

```text
isMirror(2L, 2R)                          â† ä¸¤è¾¹å€¼ç›¸ç­‰ï¼Œç»§ç»­é€’å½’

æ£€æŸ¥ï¼š2 == 2 âœ… é€šè¿‡

ç»§ç»­ï¼š
return isMirror(2L.left, 2R.right)   &&   isMirror(2L.right, 2R.left)
     = isMirror(3, 3)                &&   isMirror(4, 4)
```

æŠŠè¿™ä¸€æ­¥ç”»æˆâ€œé€’å½’æ ‘â€çš„æ ·å­ï¼š

```text
                 isMirror(2L, 2R)
                 /               \
        isMirror(3, 3)       isMirror(4, 4)
```

---

### Step 3ï¼šå¤„ç† isMirror(3, 3)

```text
isMirror(3, 3)

1. éƒ½ä¸ä¸ºç©º âœ…
2. å€¼ç›¸ç­‰ï¼š3 == 3 âœ…

ç»§ç»­é€’å½’ï¼š
return isMirror(3.left, 3.right) && isMirror(3.right, 3.left)
     = isMirror(null, null)      && isMirror(null, null)
```

ç”»æˆé€’å½’å­æ ‘ï¼š

```text
            isMirror(3, 3)
             /          \
isMirror(null, null)  isMirror(null, null)
        |                   |
       true                true

=> isMirror(3, 3) è¿”å›ï¼štrue && true = true
```

---

### Step 4ï¼šå¤„ç† isMirror(4, 4)

å¯¹ç§°åœ°ï¼Œé€»è¾‘ä¸€æ ·ï¼š

```text
isMirror(4, 4)

1. éƒ½ä¸ä¸ºç©º âœ…
2. å€¼ç›¸ç­‰ï¼š4 == 4 âœ…

ç»§ç»­ï¼š
return isMirror(4.left, 4.right) && isMirror(4.right, 4.left)
     = isMirror(null, null)      && isMirror(null, null)
```

é€’å½’æ ‘ï¼š

```text
            isMirror(4, 4)
             /          \
isMirror(null, null)  isMirror(null, null)
        |                   |
       true                true

=> isMirror(4, 4) è¿”å›ï¼štrue && true = true
```

---

## ä¸‰ã€æŠŠæ•´æ£µâ€œé€’å½’è°ƒç”¨æ ‘â€æ‹¼åœ¨ä¸€èµ·

å®Œæ•´è°ƒç”¨ç»“æ„å¦‚ä¸‹ï¼ˆ**ä»ä¸Šåˆ°ä¸‹è¶Šèµ°è¶Šæ·±**ï¼‰ï¼š

```text
1. isSymmetric(root)
   â””â”€â”€ isMirror(root.left, root.right)
       = isMirror(2L, 2R)

2. isMirror(2L, 2R)
   â”œâ”€â”€ isMirror(3, 3)
   â”‚   â”œâ”€â”€ isMirror(null, null) â†’ true
   â”‚   â””â”€â”€ isMirror(null, null) â†’ true
   â”‚       â†’ è¿”å› true && true = true    â† â€œå¤–ä¾§ & å†…ä¾§â€ éƒ½å¯¹ç§°
   â”‚
   â””â”€â”€ isMirror(4, 4)
       â”œâ”€â”€ isMirror(null, null) â†’ true
       â””â”€â”€ isMirror(null, null) â†’ true
           â†’ è¿”å› true && true = true

3. å›åˆ° isMirror(2L, 2R)
   å·¦ç»“æœï¼šisMirror(3, 3) â†’ true
   å³ç»“æœï¼šisMirror(4, 4) â†’ true

   â†’ isMirror(2L, 2R) è¿”å›ï¼štrue && true = true

4. å›åˆ° isSymmetric(root)
   â†’ è¿”å› true ï¼ˆè¿™æ£µæ ‘è½´å¯¹ç§°ï¼‰
```

---

## å››ã€æŠŠé€’å½’æ ‘ç”»æˆä¸€å¼ â€œæ€»æµç¨‹å›¾â€

```text
                          isSymmetric(root)
                                   |
                                   â–¼
                         isMirror(2L, 2R)
                          /             \
                         /               \
                isMirror(3, 3)             isMirror(4, 4)
                 /        \                           /        \
                /          \                         /          \
   isMirror(null,null) isMirror(null,null) isMirror(null,null) isMirror(null,null)
          |                  |               |                   |
         true               true            true                true

   isMirror(3,3) = true && true = true
   isMirror(4,4) = true && true = true

isMirror(2L,2R) = true && true = true

isSymmetric(root) = true
```
