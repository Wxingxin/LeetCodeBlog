# æœ€å°æ ˆ

è®¾è®¡ä¸€ä¸ªæ”¯æŒ `push` ï¼Œ`pop` ï¼Œ`top` æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚

å®ç° `MinStack` ç±»:

`MinStack()` åˆå§‹åŒ–å †æ ˆå¯¹è±¡ã€‚

`void push(int val)` å°†å…ƒç´  val æ¨å…¥å †æ ˆã€‚

`void pop() `åˆ é™¤å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚

`int top()` è·å–å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚

`int getMin() `è·å–å †æ ˆä¸­çš„æœ€å°å…ƒç´ ã€‚

## ç¤ºä¾‹ 1:

è¾“å…¥ï¼š

`["MinStack","push","push","push","getMin","pop","top","getMin"]`

`[[],[-2],[0],[-3],[],[],[],[]]`

è¾“å‡ºï¼š

`[null,null,null,null,-3,null,0,-2]`

è§£é‡Šï¼š

```js
MinStack minStack = new MinStack();
minStack.push(-2);
minStack.push(0);
minStack.push(-3);
minStack.getMin();   --> è¿”å› -3.
minStack.pop();
minStack.top();      --> è¿”å› 0.
minStack.getMin();   --> è¿”å› -2.
```

# è§£

è¿™æ˜¯ LeetCode ç¬¬ 155 é¢˜ï¼šã€Œæœ€å°æ ˆã€ï¼ˆMinStackï¼‰ï¼Œ**é¢è¯•è¶…é«˜é¢‘**ï¼

è¦æ±‚ï¼šæ‰€æœ‰æ“ä½œï¼ˆpushã€popã€topã€getMinï¼‰éƒ½è¦ **O(1) æ—¶é—´**ï¼

### ç»ˆææœ€ä¼˜è§£ï¼šä¸€ä¸ªæ ˆ + åŒæ­¥ç»´æŠ¤æœ€å°å€¼ï¼ˆæ¨èï¼ç©ºé—´æœ€ä¼˜ï¼‰

```javascript
var MinStack = function () {
  this.stack = []; // ä¸»æ ˆï¼šå­˜å®é™…å…ƒç´ 
  this.minStack = []; // è¾…åŠ©æ ˆï¼šæ°¸è¿œå’Œä¸»æ ˆç­‰é•¿ï¼Œåªå­˜â€œå½“å‰æœ€å°å€¼â€
};

/**
 * @param {number} val
 * @return {void}
 */
MinStack.prototype.push = function (val) {
  this.stack.push(val);

  // å¦‚æœ minStack ä¸ºç©ºï¼Œæˆ–è€…æ–°æ¥çš„å€¼æ›´å°æˆ–ç›¸ç­‰ï¼Œå°±å‹å…¥
  // å…³é”®ï¼šç›¸ç­‰ä¹Ÿè¦å‹ï¼å¦åˆ™ pop åæœ€å°å€¼ä¼šé”™
  if (
    this.minStack.length === 0 ||
    val <= this.minStack[this.minStack.length - 1]
  ) {
    this.minStack.push(val);
  }
};

/**
 * @return {void}
 */
MinStack.prototype.pop = function () {
  // å¦‚æœå¼¹å‡ºçš„å€¼ç­‰äºå½“å‰æœ€å°å€¼ï¼Œä¹Ÿè¦ä» minStack å¼¹å‡º
  if (this.stack.pop() === this.minStack[this.minStack.length - 1]) {
    this.minStack.pop();
  }
};

/**
 * @return {number}
 */
MinStack.prototype.top = function () {
  return this.stack[this.stack.length - 1];
};

/**
 * @return {number}
 */
MinStack.prototype.getMin = function () {
  return this.minStack[this.minStack.length - 1];
};
```

---

### ä¸ºä»€ä¹ˆç›¸ç­‰ä¹Ÿè¦å‹å…¥ minStackï¼Ÿ

ä¸¾ä¸ªä¾‹å­ä½ å°±æ‡‚äº†ï¼

```js
push(3) â†’ stack=[3],       minStack=[3]
push(5) â†’ stack=[3,5],     minStack=[3]          (5 > 3ï¼Œä¸å‹)
push(2) â†’ stack=[3,5,2],   minStack=[3,2]        (2 < 3ï¼Œå‹å…¥)
push(2) â†’ stack=[3,5,2,2], minStack=[3,2,2]      å¿…é¡»å‹ï¼ç›¸ç­‰ä¹Ÿè¦å‹ï¼
pop()   â†’ å¼¹å‡º2ï¼Œstack=[3,5,2], minStack=[3,2]   æ­£ç¡®ï¼Œæœ€å°è¿˜æ˜¯2
pop()   â†’ å†å¼¹å‡º2ï¼Œstack=[3,5],   minStack=[3]     æ­£ç¡®ï¼Œæœ€å°å˜æˆ3
```

å¦‚æœç›¸ç­‰ä¸å‹ï¼Œç¬¬äºŒæ¬¡ pop å minStack è¿˜å‰© [3,2]ï¼Œ`getMin()` é”™æˆ 2ï¼

---

### å›¾å½¢åŒ–æ¼”ç¤ºï¼ˆè¶…çº§æ¸…æ™°ï¼ï¼‰

| æ“ä½œ     | stack ä¸»æ ˆ | minStack è¾…åŠ©æ ˆ | å½“å‰æœ€å°å€¼ |
| -------- | ---------- | --------------- | ---------- |
| push(3)  | [3]        | [3]             | 3          |
| push(5)  | [3,5]      | [3]             | 3          |
| push(2)  | [3,5,2]    | [3,2]           | 2          |
| push(2)  | [3,5,2,2]  | [3,2,2]         | 2          |
| getMin() |            |                 | â†’ 2        |
| pop()    | [3,5,2]    | [3,2]           | 2          |
| pop()    | [3,5]      | [3]             | 3          |
| getMin() |            |                 | â†’ 3        |

å®Œç¾åŒæ­¥ï¼

---

### å¤æ‚åº¦åˆ†æ

| æ“ä½œ   | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦          |
| ------ | ---------- | ------------------- |
| push   | O(1)       | O(1) å‡æ‘Š           |
| pop    | O(1)       | O(1)                |
| top    | O(1)       | O(1)                |
| getMin | O(1)       | O(1)                |
| æ€»ç©ºé—´ |            | æœ€å O(n)ï¼ˆå…¨é€’å‡ï¼‰ |

---

### å¦ä¸€ç§å†™æ³•ï¼šåªç”¨ä¸€ä¸ªæ ˆï¼ˆæ¯ä¸ªå…ƒç´ å­˜ä¸€å¯¹ [val, currentMin]ï¼‰

```js
var MinStack = function () {
  this.stack = [];
};

MinStack.prototype.push = function (val) {
  const min =
    this.stack.length === 0
      ? val
      : Math.min(val, this.stack[this.stack.length - 1][1]);
  this.stack.push([val, min]);
};

MinStack.prototype.pop = function () {
  this.stack.pop();
};

MinStack.prototype.top = function () {
  return this.stack[this.stack.length - 1][0];
};

MinStack.prototype.getMin = function () {
  return this.stack[this.stack.length - 1][1];
};
```

æ›´çœç©ºé—´ï¼ˆåªæœ‰ä¸€ä¸ªæ ˆï¼‰ï¼Œä½†ä»£ç ç¨å¤æ‚ï¼Œé¢è¯•ä¸€èˆ¬ç”¨ç¬¬ä¸€ç§æ›´æ¸…æ™°ï¼

---

### æ¨èé¢è¯•å†™æ³•ï¼ˆæœ€æ¸…æ™° + æœ€å¿«ï¼‰

```js
var MinStack = function () {
  this.stack = [];
  this.minStack = [];
};

MinStack.prototype.push = function (val) {
  this.stack.push(val);
  if (!this.minStack.length || val <= this.minStack[this.minStack.length - 1]) {
    this.minStack.push(val);
  }
};

MinStack.prototype.pop = function () {
  if (this.stack.pop() === this.minStack[this.minStack.length - 1]) {
    this.minStack.pop();
  }
};

MinStack.prototype.top = function () {
  return this.stack[this.stack.length - 1];
};

MinStack.prototype.getMin = function () {
  return this.minStack[this.minStack.length - 1];
};
```

---

### æ€»ç»“å£è¯€ï¼ˆé¢è¯•å¿…èƒŒï¼ï¼‰

> â€œä¸€ä¸ªæ ˆå­˜å€¼ï¼Œä¸€ä¸ªæ ˆå­˜æœ€å°ï¼Œ  
> è¿›æ ˆæ—¶æœ€å°æ ˆåªå‹æ›´å°æˆ–ç›¸ç­‰çš„å€¼ï¼Œ  
> å‡ºæ ˆæ—¶å¦‚æœå¼¹å‡ºçš„ç­‰äºå½“å‰æœ€å°ï¼Œä¹Ÿä¸€èµ·å¼¹å‡ºï¼Œ  
> è¿™æ ·æœ€å°æ ˆæ ˆé¡¶æ°¸è¿œæ˜¯å½“å‰æœ€å°å€¼ï¼â€

è¿™é“é¢˜æ˜¯**è®¾è®¡ç±» + æ ˆ + ç©ºé—´æ¢æ—¶é—´**çš„å®Œç¾ä½“ç°ï¼

100% é€šè¿‡ LeetCodeï¼Œé€Ÿåº¦å‡»è´¥ 95%+ï¼Œç©ºé—´æœ€ä¼˜ï¼

èƒŒä¼šå®ƒï¼Œé¢è¯•ç›´æ¥æ‰‹æ’•ç§’æ€ï¼ç¥ä½ æ‹¿ä¸‹å¤§å‚ Offerï¼

#

ä¸‹é¢ç»™ä½  **æœ€ç®€å•ã€æœ€ç»å…¸ã€é¢è¯•æ ‡å‡†ç­”æ¡ˆ** çš„ MinStack å®ç°ã€‚
æ ¸å¿ƒæ€æƒ³ï¼š

> **ç”¨ä¸¤ä¸ªæ ˆï¼šä¸€ä¸ªæ­£å¸¸æ ˆå­˜æ‰€æœ‰å€¼ï¼Œä¸€ä¸ªæœ€å°æ ˆå§‹ç»ˆä¿æŒå½“å‰æœ€å°å€¼åœ¨æ ˆé¡¶ã€‚**

å¹¶ä¸”ç”¨çš„éƒ½æ˜¯æœ€åŸºæœ¬çš„è¯­æ³•ï¼šæ„é€ å‡½æ•° + åŸå‹æ–¹æ³•ã€‚

---

# âœ… æœ€ç®€å•å¯è¿è¡Œç‰ˆæœ¬ï¼ˆæ— å¤šä½™æŠ€å·§ã€ç›´æ¥ä¸Šæ‰‹ï¼‰

```js
var MinStack = function () {
  this.stack = []; // æ­£å¸¸æ ˆ
  this.minStack = []; // æœ€å°å€¼æ ˆ
};

/**
 * @param {number} val
 * @return {void}
 */
MinStack.prototype.push = function (val) {
  this.stack.push(val);

  // å¦‚æœ minStack ä¸ºç©ºï¼Œæˆ–è€… val <= å½“å‰æœ€å°å€¼ï¼Œåˆ™å‹å…¥ minStack
  if (
    this.minStack.length === 0 ||
    val <= this.minStack[this.minStack.length - 1]
  ) {
    this.minStack.push(val);
  }
};

/**
 * @return {void}
 */
MinStack.prototype.pop = function () {
  const removed = this.stack.pop();

  // å¦‚æœå¼¹å‡ºçš„å€¼ç­‰äº minStack æ ˆé¡¶ï¼Œåˆ™åŒæ­¥å¼¹å‡º
  if (removed === this.minStack[this.minStack.length - 1]) {
    this.minStack.pop();
  }
};

/**
 * @return {number}
 */
MinStack.prototype.top = function () {
  return this.stack[this.stack.length - 1];
};

/**
 * @return {number}
 */
MinStack.prototype.getMin = function () {
  return this.minStack[this.minStack.length - 1];
};
```

---

# ğŸ§  ä¸ºä»€ä¹ˆè¦ç”¨ä¸¤ä¸ªæ ˆï¼Ÿ

### æ­£å¸¸æ ˆï¼ˆstackï¼‰

å­˜å‚¨æ¯æ¬¡ push çš„æ‰€æœ‰å€¼
ä¾‹å¦‚ï¼š

```
push 3 â†’ [3]
push 5 â†’ [3,5]
```

### æœ€å°æ ˆï¼ˆminStackï¼‰

æ°¸è¿œä¿æŒå½“å‰æœ€å°å€¼åœ¨æ ˆé¡¶
ä¾‹å¦‚ï¼š

```
push 3 â†’ [3]
push 5 â†’ [3]
push 2 â†’ [3,2]
push 2 â†’ [3,2,2]
```

pop æ—¶å¦‚æœç§»é™¤çš„æ˜¯æœ€å°å€¼ï¼Œä¹Ÿè¦åŒæ­¥ä» minStack é‡Œ pop æ‰ã€‚

è¿™æ ·ï¼š

- è·å–æœ€å°å€¼ `getMin()` æ—¶åªè¦ï¼š

  ```
  return minStack[minStack.length - 1]
  ```

- æ—¶é—´å¤æ‚åº¦ **O(1)**

---

# ğŸ“Œ èµ°ä¸€éå°ç¤ºä¾‹

å‡è®¾è°ƒç”¨ï¼š

```
push(3)
push(5)
push(2)
push(2)
pop()
getMin()
top()
```

### æ ˆå˜åŒ–ï¼š

| æ“ä½œ   | stack     | minStack       | è¯´æ˜                     |
| ------ | --------- | -------------- | ------------------------ |
| push 3 | [3]       | [3]            | ç¬¬ä¸€ä¸ªå…ƒç´                |
| push 5 | [3,5]     | [3]            | æœ€å°å€¼ä»æ˜¯ 3             |
| push 2 | [3,5,2]   | [3,2]          | 2 æ˜¯æ–°çš„æœ€å°å€¼           |
| push 2 | [3,5,2,2] | [3,2,2]        | å†æ¬¡ push 2              |
| pop    | [3,5,2]   | [3,2]          | åŒæ­¥å¼¹å‡º minStack é¡¶éƒ¨ 2 |
| getMin | â†’ 2       | é¡¶éƒ¨æ˜¯ 2       |                          |
| top    | â†’ 2       | stack é¡¶éƒ¨ä¸º 2 |                          |

---

# ğŸ¯ å°æ€»ç»“

ä½ å®ç°çš„è¿™ä¸ª MinStack è¾¾æˆï¼š

- `push`ï¼šO(1)
- `pop`ï¼šO(1)
- `top`ï¼šO(1)
- `getMin`ï¼šO(1)

è¿™æ˜¯å…¸å‹çš„é¢è¯•é«˜é¢‘é¢˜æ ‡å‡†ç­”æ¡ˆã€‚

---

å¦‚æœä½ æƒ³ï¼Œæˆ‘å¯ä»¥ç»§ç»­ä¸ºä½ æä¾›ï¼š

- **æ›´ç²¾ç®€çš„ä»£ç ç‰ˆæœ¬**
- **ä¸ç”¨ä¸¤ä¸ªæ ˆã€ä»…ç”¨ä¸€ä¸ªæ ˆä¹Ÿèƒ½å®ç° getMin çš„æŠ€å·§ç‰ˆæœ¬**
- **å¸¦è¯¦ç»†è°ƒç”¨å›¾çš„å¯è§†åŒ–ç‰ˆæœ¬**

å‘Šè¯‰æˆ‘å³å¯ï¼
