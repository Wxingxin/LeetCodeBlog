ç»™å®šä¸€ä¸ªåŒ…å«çº¢è‰²ã€ç™½è‰²å’Œè“è‰²ã€å…± n ä¸ªå…ƒç´ çš„æ•°ç»„ nums ï¼ŒåŽŸåœ° å¯¹å®ƒä»¬è¿›è¡ŒæŽ’åºï¼Œä½¿å¾—ç›¸åŒé¢œè‰²çš„å…ƒç´ ç›¸é‚»ï¼Œå¹¶æŒ‰ç…§çº¢è‰²ã€ç™½è‰²ã€è“è‰²é¡ºåºæŽ’åˆ—ã€‚

æˆ‘ä»¬ä½¿ç”¨æ•´æ•° 0ã€ 1 å’Œ 2 åˆ†åˆ«è¡¨ç¤ºçº¢è‰²ã€ç™½è‰²å’Œè“è‰²ã€‚

å¿…é¡»åœ¨ä¸ä½¿ç”¨åº“å†…ç½®çš„ sort å‡½æ•°çš„æƒ…å†µä¸‹è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šnums = `[2,0,2,1,1,0]`
è¾“å‡ºï¼š`[0,0,1,1,2,2]`
ç¤ºä¾‹ 2ï¼š

è¾“å…¥ï¼šnums =` [2,0,1]`
è¾“å‡ºï¼š`[0,1,2]`

#

å¯ä»¥ç”¨ã€Œæ ˆã€å¾ˆä¼˜é›…åœ°è§£å†³è¿™ä¸ªé¢˜ ðŸ‘

æ€è·¯ç®€è¦è¯´ä¸‹ï¼š

- ç”¨ä¸¤ä¸ªæ ˆï¼š

  - `numStack`ï¼šä¿å­˜é‡å¤æ¬¡æ•° k
  - `strStack`ï¼šä¿å­˜å½“å‰æž„å»ºçš„å­—ç¬¦ä¸²

- å†ç”¨ï¼š

  - `currentNum`ï¼šå½“å‰æ­£åœ¨è§£æžçš„æ•°å­—ï¼ˆå¯èƒ½æ˜¯å¤šä½ï¼Œæ¯”å¦‚ "12[ab]"ï¼‰
  - `currentStr`ï¼šå½“å‰æ­£åœ¨æž„å»ºçš„å­—ç¬¦ä¸²

éåŽ†å­—ç¬¦ä¸² `s` ä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼š

1. **å¦‚æžœæ˜¯æ•°å­—**ï¼šæ›´æ–° `currentNum = currentNum * 10 + (å½“å‰æ•°å­—)`

   - è¿™æ ·å°±èƒ½å¤„ç†å¤šä½æ•°ï¼Œæ¯”å¦‚ "12[abc]"

2. **å¦‚æžœæ˜¯å­—æ¯**ï¼šæŠŠå®ƒåŠ åˆ° `currentStr` åŽé¢

3. **å¦‚æžœæ˜¯ `[`**ï¼š

   - æŠŠå½“å‰çš„ `currentNum` åŽ‹å…¥ `numStack`
   - æŠŠå½“å‰çš„ `currentStr` åŽ‹å…¥ `strStack`
   - ç„¶åŽé‡ç½® `currentNum = 0`ï¼Œ`currentStr = ""`ï¼Œå¼€å§‹å¤„ç†ä¸­æ‹¬å·é‡Œçš„æ–°ä¸€å±‚å­—ç¬¦ä¸²

4. **å¦‚æžœæ˜¯ `]`**ï¼š

   - è¯´æ˜Žå½“å‰ `currentStr` æ˜¯ `encoded_string`
   - å¼¹å‡ºä¸€ä¸ªæ•°å­— `k`ï¼š`repeatTimes = numStack.pop()`
   - å¼¹å‡ºä¸Šä¸€å±‚çš„å­—ç¬¦ä¸² `prevStr = strStack.pop()`
   - è§£ç ï¼š`currentStr = prevStr + currentStr.repeat(repeatTimes)`

éåŽ†ç»“æŸåŽï¼Œ`currentStr` å°±æ˜¯ç»“æžœã€‚

---

### ä»£ç å®žçŽ°ï¼ˆJavaScriptï¼‰

```js
/**
 * @param {string} s
 * @return {string}
 */
var decodeString = function (s) {
  let numStack = []; // å­˜æ”¾æ•°å­— k
  let strStack = []; // å­˜æ”¾ä¹‹å‰çš„å­—ç¬¦ä¸²
  let currentNum = 0; // å½“å‰æ­£åœ¨è§£æžçš„æ•°å­—
  let currentStr = ""; // å½“å‰æ­£åœ¨æž„å»ºçš„å­—ç¬¦ä¸²

  for (let ch of s) {
    if (ch >= "0" && ch <= "9") {
      // å¤„ç†å¤šä½æ•°
      currentNum = currentNum * 10 + (ch.charCodeAt(0) - "0".charCodeAt(0));
    } else if (ch === "[") {
      // æŠŠå½“å‰çŠ¶æ€åŽ‹æ ˆï¼Œå¼€å§‹æ–°çš„ä¸€å±‚
      numStack.push(currentNum);
      strStack.push(currentStr);
      // é‡ç½®
      currentNum = 0;
      currentStr = "";
    } else if (ch === "]") {
      // å½“å‰å±‚ç»“æŸï¼Œå¼¹æ ˆè¿›è¡Œæ‹¼æŽ¥
      let repeatTimes = numStack.pop();
      let prevStr = strStack.pop();
      currentStr = prevStr + currentStr.repeat(repeatTimes);
    } else {
      // æ™®é€šå­—æ¯
      currentStr += ch;
    }
  }

  return currentStr;
};
```

---

### ç”¨ç¤ºä¾‹æµ‹è¯•ä¸€ä¸‹

- è¾“å…¥ï¼š`"3[a]2[bc]"`

è¿‡ç¨‹å¤§è‡´æ˜¯ï¼š

- è¯»åˆ° `3` â†’ `currentNum = 3`
- è¯»åˆ° `[` â†’ åŽ‹æ ˆï¼š`numStack = [3]`ï¼Œ`strStack = [""]`ï¼Œé‡ç½®
- è¯»åˆ° `a` â†’ `currentStr = "a"`
- è¯»åˆ° `]` â†’ å¼¹å‡ºï¼š`repeatTimes = 3`ï¼Œ`prevStr = ""`
  å¾—åˆ°ï¼š`currentStr = "" + "a".repeat(3) = "aaa"`
- è¯»åˆ° `2` â†’ `currentNum = 2`
- è¯»åˆ° `[` â†’ åŽ‹æ ˆï¼š`numStack = [2]`ï¼Œ`strStack = ["aaa"]`ï¼Œé‡ç½®
- è¯»åˆ° `b`ã€`c` â†’ `currentStr = "bc"`
- è¯»åˆ° `]` â†’ å¼¹å‡ºï¼š`repeatTimes = 2`ï¼Œ`prevStr = "aaa"`
  å¾—åˆ°ï¼š`currentStr = "aaa" + "bc".repeat(2) = "aaabcbc"`

æœ€ç»ˆè¿”å›žï¼š`"aaabcbc"`

å¦‚æžœä½ æ„¿æ„ï¼Œæˆ‘ä¹Ÿå¯ä»¥å¸®ä½ å†™ä¸€ä¸ªé€’å½’ç‰ˆæœ¬ï¼Œæˆ–è€…ä¸€èµ·è¿‡å‡ ä¸ªæ›´å¤æ‚çš„ä¾‹å­ï¼Œæ¯”å¦‚ `"3[a2[c]]"`ã€`"2[abc]3[cd]ef"`ã€‚
