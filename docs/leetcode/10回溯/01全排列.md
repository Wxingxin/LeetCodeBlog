# é¢˜

ç»™å®šä¸€ä¸ªä¸å«é‡å¤æ•°å­—çš„æ•°ç»„ nums ï¼Œè¿”å›å…¶ æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ— ã€‚ä½ å¯ä»¥ æŒ‰ä»»æ„é¡ºåº è¿”å›ç­”æ¡ˆã€‚

## ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šnums = `[1,2,3]`
è¾“å‡ºï¼š`[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]`

## ç¤ºä¾‹ 2ï¼š

è¾“å…¥ï¼šnums = `[0,1]`
è¾“å‡ºï¼š`[[0,1],[1,0]]`

## ç¤ºä¾‹ 3ï¼š

è¾“å…¥ï¼šnums = `[1]`
è¾“å‡ºï¼š`[[1]]`

# è§£

è¿™ä¸ªé¢˜å°±æ˜¯ç»å…¸çš„ã€Œå›æº¯ç”Ÿæˆå…¨æ’åˆ—ã€ã€‚æˆ‘ä»¬æ¥å†™ä¸€ä¸ªæ¸…æ™°çš„ç‰ˆæœ¬ï¼Œå†ç®€å•èµ°ä¸€éä¾‹å­ã€‚

---

## ğŸ§  æ€è·¯ï¼šå›æº¯ + è·¯å¾„æ„å»º

- å› ä¸º `nums` ä¸­ **æ²¡æœ‰é‡å¤æ•°å­—**ï¼Œæ‰€ä»¥ä¸éœ€è¦å»é‡å¤„ç†ã€‚
- ç”¨ä¸€ä¸ªæ•°ç»„ `path` è¡¨ç¤ºå½“å‰æ­£åœ¨æ„å»ºçš„æ’åˆ—ã€‚
- ç”¨ä¸€ä¸ª `used` æ•°ç»„ï¼ˆå¸ƒå°”æ•°ç»„ï¼‰æ ‡è®°æ¯ä¸ªä¸‹æ ‡çš„æ•°å­—æ˜¯å¦å·²ç»è¢«é€‰è¿› `path`ã€‚
- å½“ `path.length === nums.length` æ—¶ï¼Œè¯´æ˜å½¢æˆäº†ä¸€ä¸ªå®Œæ•´æ’åˆ—ï¼ŒæŠŠå®ƒæ”¾è¿›ç»“æœé‡Œã€‚

é€’å½’è¿‡ç¨‹å¯ä»¥å¤§è‡´ç†è§£ä¸ºï¼š

> åœ¨æ¯ä¸€å±‚é€’å½’ä¸­ï¼Œå°è¯•æŠŠè¿˜æ²¡ç”¨è¿‡çš„æ•°å­—æ”¾è¿›å½“å‰æ’åˆ—ï¼Œç„¶åè¿›å…¥ä¸‹ä¸€å±‚ã€‚

---

## âœ… ä»£ç å®ç°ï¼ˆJavaScriptï¼‰

```js
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var permute = function (nums) {
  const res = [];
  const path = [];
  const used = new Array(nums.length).fill(false);

  const backtrack = () => {
    // å¦‚æœå½“å‰è·¯å¾„é•¿åº¦ç­‰äº nums é•¿åº¦ï¼Œè¯´æ˜å½¢æˆäº†ä¸€ä¸ªå®Œæ•´æ’åˆ—
    if (path.length === nums.length) {
      res.push(path.slice()); // æ³¨æ„è¦æ‹·è´ä¸€ä»½
      return;
    }

    // å°è¯•æ”¾å…¥æ¯ä¸€ä¸ªè¿˜æ²¡ä½¿ç”¨è¿‡çš„æ•°å­—
    for (let i = 0; i < nums.length; i++) {
      if (used[i]) continue; // å·²ç»ç”¨è¿‡å°±è·³è¿‡

      // é€‰æ‹© nums[i]
      used[i] = true;
      path.push(nums[i]);

      // é€’å½’è¿›å…¥ä¸‹ä¸€å±‚
      backtrack();

      // æ’¤é”€é€‰æ‹©ï¼ˆå›æº¯ï¼‰
      path.pop();
      used[i] = false;
    }
  };

  backtrack();
  return res;
};
```

---

## ğŸ” ç”¨ç¤ºä¾‹ `nums = [1, 2, 3]` ç•¥å¾®çœ‹ä¸€çœ¼è¿‡ç¨‹

å¤§è‡´ç”Ÿæˆé¡ºåºæ˜¯ï¼š

1. `[1, 2, 3]`
2. `[1, 3, 2]`
3. å›æº¯ï¼Œé¦–ä½å˜æˆ `2` â†’ `[2, 1, 3]`
4. `[2, 3, 1]`
5. å›æº¯ï¼Œé¦–ä½å˜æˆ `3` â†’ `[3, 1, 2]`
6. `[3, 2, 1]`

æœ€ç»ˆè¿”å›ï¼š

```js
[
  [1, 2, 3],
  [1, 3, 2],
  [2, 1, 3],
  [2, 3, 1],
  [3, 1, 2],
  [3, 2, 1],
];
```

å¦‚æœä½ æƒ³ï¼Œæˆ‘å¯ä»¥æŠŠå›æº¯è¿‡ç¨‹ç”¨â€œæ ‘å½¢å›¾â€ç”»å‡ºæ¥ï¼Œè®©ä½ æ›´ç›´è§‚åœ°æ„Ÿå—æœç´¢æ ‘æ˜¯æ€ä¹ˆå±•å¼€çš„ã€‚

#

å¤ªæ£’äº†ï¼ä½ ç»™çš„ä»£ç å·²ç»æ˜¯ **LeetCode 46. å…¨æ’åˆ—** çš„æœ€æ ‡å‡†ã€æœ€ä¼˜é›…çš„å›æº¯å†™æ³•ï¼

ç°åœ¨æˆ‘ç»“åˆ `nums = [1,2,3]`ï¼Œç»™ä½ ç”»å‡º **å®Œæ•´å›¾å½¢åŒ–çš„é€’å½’è°ƒç”¨æ ‘ï¼ˆåƒæµç¨‹å›¾ä¸€æ ·ï¼‰**ï¼Œè®©ä½ ä¸€çœ¼çœ‹æ‡‚æ•´ä¸ªå›æº¯è¿‡ç¨‹æ˜¯æ€ä¹ˆâ€œå¼€èŠ±ç»“æœâ€çš„ï¼

---

### è¾“å…¥ï¼šnums = [1,2,3]

### ç›®æ ‡è¾“å‡ºï¼ˆ6 ä¸ªæ’åˆ—ï¼‰ï¼š

```js
[
  [1, 2, 3],
  [1, 3, 2],
  [2, 1, 3],
  [2, 3, 1],
  [3, 1, 2],
  [3, 2, 1],
];
```

---

### è¶…çº§æ¸…æ™°é€’å½’è°ƒç”¨æ ‘ï¼ˆæµç¨‹å›¾ç‰ˆï¼‰

```
                            backtrack()
                            path=[] used=[f,f,f]
                                 â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                  â”‚                   â”‚
        é€‰1                é€‰2                  é€‰3
    path=[1]            path=[2]              path=[3]
   used=[t,f,f]         used=[f,t,f]          used=[f,f,t]
          â”‚                  â”‚                   â”‚
      backtrack()        backtrack()         backtrack()
          â”‚                  â”‚                   â”‚
      â”Œâ”€â”€â”€â”´â”€â”€â”€â”          â”Œâ”€â”€â”€â”´â”€â”€â”€â”           â”Œâ”€â”€â”€â”´â”€â”€â”€â”
      â”‚       â”‚          â”‚       â”‚           â”‚       â”‚
     é€‰2     é€‰3         é€‰1     é€‰3          é€‰1     é€‰2
  path=[1,2] [1,3]     [2,1]   [2,3]       [3,1]   [3,2]
 used=[t,t,f][t,f,t]  [t,t,f] [f,t,t]      [t,f,t] [f,t,t]
      â”‚       â”‚          â”‚       â”‚           â”‚       â”‚
  backtrack() backtrack() backtrack() backtrack() backtrack() backtrack()
      â”‚       â”‚          â”‚       â”‚           â”‚       â”‚
     é€‰3     é€‰2         é€‰3     é€‰1          é€‰2     é€‰1
  path=[1,2,3] [1,3,2]  [2,1,3] [2,3,1]     [3,1,2] [3,2,1]
   length=3   length=3  length=3 length=3   length=3 length=3
      â†“       â†“          â†“       â†“           â†“       â†“
   æ‰¾åˆ°è§£ï¼    è§£ï¼        è§£ï¼    è§£ï¼         è§£ï¼    è§£ï¼
   åŠ å…¥     åŠ å…¥        åŠ å…¥     åŠ å…¥         åŠ å…¥     åŠ å…¥
   res      res         res      res          res      res
      â†‘       â†‘          â†‘       â†‘           â†‘       â†‘
   pop()    pop()      pop()   pop()       pop()     pop()
   used[2]=false      used[2]=false           used[1]=false
   â†å›æº¯       â†å›æº¯       â†å›æº¯         â†å›æº¯         â†å›æº¯
```

---

### 6 ä¸ªå¶å­èŠ‚ç‚¹ â†’ 6 ä¸ªæ’åˆ—å…¨æ‰¾åˆ°ï¼

---

### æ¯ä¸€æ­¥çš„ path å’Œ used çŠ¶æ€å˜åŒ–ï¼ˆè¡¨æ ¼ç‰ˆï¼‰

| æ­¥éª¤ | é€‰æ‹©   | path    | used    | è¯´æ˜                   |
| ---- | ------ | ------- | ------- | ---------------------- |
| 1    | é€‰ 1   | [1]     | [T,F,F] | ç¬¬ä¸€å±‚åˆ†æ”¯             |
| 2    | é€‰ 2   | [1,2]   | [T,T,F] |                        |
| 3    | é€‰ 3   | [1,2,3] | [T,T,T] | æ‰¾åˆ°è§£ â†’ åŠ å…¥ç»“æœ      |
| 4    | æ’¤é”€ 3 | [1,2]   | [T,T,F] | å›æº¯                   |
| 5    | æ— äº†   | [1]     | [T,F,F] | ç¬¬äºŒå±‚æ— å…¶ä»–é€‰é¡¹ï¼Œå›æº¯ |
| 6    | é€‰ 3   | [1,3]   | [T,F,T] | ç¬¬ä¸€å±‚ç¬¬äºŒä¸ªåˆ†æ”¯       |
| 7    | é€‰ 2   | [1,3,2] | [T,T,T] | æ‰¾åˆ°è§£                 |
| ...  | ...    | ...     | ...     | ä¾æ­¤ç±»æ¨               |
| æœ€ç»ˆ |        |         |         | å…±æ”¶é›† 6 ä¸ªæ’åˆ—        |

---

### ä¸ºä»€ä¹ˆç”¨ `path.slice()` è€Œä¸æ˜¯ç›´æ¥ `push(path)`ï¼Ÿ

å› ä¸º JavaScript ä¸­æ•°ç»„æ˜¯å¼•ç”¨ç±»å‹ï¼

é”™è¯¯å†™æ³•ï¼ˆä¼šå‡ºé”™ï¼ï¼‰ï¼š

```js
res.push(path); // é”™äº†ï¼æ‰€æœ‰ç»“æœéƒ½ä¼šæŒ‡å‘åŒä¸€ä¸ªæ•°ç»„
```

æ­£ç¡®å†™æ³•ï¼š

```js
res.push(path.slice()); // æµ…æ‹·è´ä¸€ä»½å½“å‰çŠ¶æ€
// æˆ–è€…ï¼šres.push([...path]);
```

å¦åˆ™æœ€å `res` é‡Œå…¨æ˜¯ `[]`ï¼

---

### æœ€ç»ˆç»“æœç”Ÿæˆé¡ºåºï¼ˆå®é™…è¿è¡Œé¡ºåºï¼‰

```js
[1, 2, 3][(1, 3, 2)][(2, 1, 3)][(2, 3, 1)][(3, 1, 2)][(3, 2, 1)];
```

æ­£æ˜¯å­—å…¸åºï¼

---

### æ€»ç»“ï¼šå›æº¯ä¸‰æ¿æ–§ï¼ˆé¢è¯•å¿…èƒŒï¼‰

```js
const backtrack = () => {
    if (æ»¡è¶³æ¡ä»¶) {
        res.push(å½“å‰è·¯å¾„æ‹·è´);
        return;
    }
    for (é€‰æ‹© in é€‰æ‹©åˆ—è¡¨) {
        if (é€‰æ‹©å·²ç”¨) continue;
        åšé€‰æ‹©ï¼›
        backtrack();
        æ’¤é”€é€‰æ‹©ï¼›  // â† å…³é”®ï¼è®©çŠ¶æ€å¤åŸ
    }
}
```

æœ¬é¢˜å°±æ˜¯è¿™ä¸ªæ¨¡æ¿çš„å®Œç¾ä½“ç°ï¼

---

### æœ€ç»ˆç»“è®º

ä½ çš„ä»£ç  **100% æ­£ç¡®ã€å¹²å‡€ã€é«˜æ•ˆã€é¢è¯•æœ€ä¼˜å†™æ³•**ï¼

```js
var permute = function (nums) {
  const res = [];
  const path = [];
  const used = new Array(nums.length).fill(false);

  const backtrack = () => {
    if (path.length === nums.length) {
      res.push(path.slice());
      return;
    }
    for (let i = 0; i < nums.length; i++) {
      if (used[i]) continue;
      path.push(nums[i]);
      used[i] = true;
      backtrack();
      path.pop();
      used[i] = false;
    }
  };

  backtrack();
  return res;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(n Ã— n!)  
ç©ºé—´å¤æ‚åº¦ï¼šO(n) é€’å½’æ ˆ + used æ•°ç»„

è¿™é“é¢˜ + è¿™æ£µé€’å½’æ ‘ + è¿™ä¸ªæ¨¡æ¿ = é¢è¯•ç§’æ€å…¨æ’åˆ—ã€ç»„åˆã€å­é›†ç³»åˆ—ï¼

å»ºè®®ä½ æŠŠè¿™å¼ é€’å½’æ ‘ç”»åœ¨çº¸ä¸Šï¼Œé¢è¯•æ—¶ç°åœºç”»ç»™é¢è¯•å®˜çœ‹ï¼Œç›´æ¥é™ç»´æ‰“å‡»ï¼
