# é¢˜

ç»™å®šä¸€ä¸ªä¸å«é‡å¤æ•°å­—çš„æ•°ç»„ nums ï¼Œè¿”å›å…¶ æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ— ã€‚

:::info
ä½ å¯ä»¥ æŒ‰ä»»æ„é¡ºåº è¿”å›ç­”æ¡ˆã€‚
:::

## ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼š`nums = [1,2,3]`

è¾“å‡ºï¼š`[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]`

## ç¤ºä¾‹ 2ï¼š

è¾“å…¥ï¼š`nums = [0,1]`

è¾“å‡ºï¼š`[[0,1],[1,0]]`

## ç¤ºä¾‹ 3ï¼š

è¾“å…¥ï¼š`nums = [1]`

è¾“å‡ºï¼š`[[1]]`

# è§£

## ğŸ§  æ€è·¯

### 1. **å›æº¯çš„åŸºæœ¬æ­¥éª¤**

å›æº¯ç®—æ³•å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„çš„æ·±åº¦ä¼˜å…ˆéå†ï¼š

- **è·¯å¾„ï¼ˆpathï¼‰**ï¼šæ˜¯å½“å‰é€’å½’è·¯å¾„çš„è®°å½•ï¼Œæ¯èµ°ä¸€æ­¥å°±æŠŠé€‰ä¸­çš„æ•°å­—åŠ å…¥è·¯å¾„ã€‚
- **é€‰æ‹©ï¼ˆchoicesï¼‰**ï¼šæ¯ä¸€å±‚é€’å½’éƒ½å¯ä»¥ä»æœªä½¿ç”¨çš„æ•°å­—ä¸­é€‰ä¸€ä¸ªã€‚
- **å‰ªæ**ï¼šå¦‚æœæŸä¸ªé€‰æ‹©å·²ç»ç”¨è¿‡äº†ï¼Œå°±è·³è¿‡å®ƒï¼Œä¸å†é€’å½’ã€‚
- **ç»“æŸæ¡ä»¶**ï¼šå½“è·¯å¾„çš„é•¿åº¦ç­‰äºæ•°ç»„çš„é•¿åº¦æ—¶ï¼Œè¯´æ˜å·²ç»æ„æˆäº†ä¸€ä¸ªå®Œæ•´çš„æ’åˆ—ï¼Œå°±å°†å…¶åŠ å…¥ç»“æœæ•°ç»„ã€‚

### 2. **æ ¸å¿ƒçš„å›æº¯æ¡†æ¶**

å›æº¯çš„æ¡†æ¶åŒ…å«ä»¥ä¸‹å‡ éƒ¨åˆ†ï¼š

- **é€’å½’è°ƒç”¨**ï¼šç”¨äºæ·±å…¥ä¸‹ä¸€å±‚ï¼Œç»§ç»­åšé€‰æ‹©ã€‚
- **è·¯å¾„æ„å»º**ï¼šæ¯å±‚é€‰æ‹©ä¸€ä¸ªæ•°å­—ï¼Œå½¢æˆè·¯å¾„ã€‚
- **æ’¤é”€é€‰æ‹©**ï¼šé€’å½’è¿”å›æ—¶ï¼Œæ’¤é”€é€‰æ‹©ï¼Œæ¢å¤çŠ¶æ€ä»¥ä¾›ä¸‹ä¸€æ­¥é€‰æ‹©ã€‚

### 3. **å›æº¯çš„å®ç°é€»è¾‘**

- ä½¿ç”¨ `used` æ•°ç»„æ¥æ ‡è®°æ¯ä¸ªæ•°å­—æ˜¯å¦å·²ç»è¢«åŠ å…¥åˆ°å½“å‰è·¯å¾„ä¸­ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ¯ä¸ªæ•°å­—åªèƒ½åœ¨å½“å‰æ’åˆ—ä¸­å‡ºç°ä¸€æ¬¡ã€‚
- æ¯æ¬¡é€’å½’å°è¯•æŠŠä¸€ä¸ªæ•°å­—åŠ å…¥å½“å‰è·¯å¾„ï¼Œå¹¶ä¸”ç»§ç»­é€’å½’ã€‚
- å½“è·¯å¾„é•¿åº¦ç­‰äº `nums.length` æ—¶ï¼Œè¯´æ˜å·²ç»å½¢æˆäº†ä¸€ä¸ªå®Œæ•´çš„æ’åˆ—ï¼Œåº”è¯¥å°†å®ƒåŠ å…¥ç»“æœæ•°ç»„ã€‚
- **å›æº¯**ï¼šé€’å½’å›æ¥åï¼Œç§»é™¤å½“å‰æ•°å­—ï¼Œå¹¶å°† `used` æ•°ç»„æ¢å¤ï¼Œä»¥ä¾¿å°è¯•å…¶ä»–å¯èƒ½çš„é€‰æ‹©ã€‚

### 4. **æ—¶é—´å¤æ‚åº¦åˆ†æ**

- **é€’å½’æ·±åº¦**ï¼šæ¯æ¬¡é€’å½’éƒ½é€‰æ‹©ä¸€ä¸ªæ•°å­—ï¼Œç›´åˆ°è·¯å¾„é•¿åº¦è¾¾åˆ° `nums.length`ï¼Œæ‰€ä»¥é€’å½’çš„æ·±åº¦æ˜¯ `n`ï¼Œå…¶ä¸­ `n` æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚
- **æ¯æ¬¡é€‰æ‹©**ï¼šåœ¨æ¯ä¸€å±‚é€’å½’ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°è¯• `n` ä¸ªæ•°å­—ï¼Œæ¯ä¸ªæ•°å­—éƒ½è¦æ£€æŸ¥æ˜¯å¦å·²ç»ä½¿ç”¨è¿‡ï¼ˆè¿™é€šå¸¸æ˜¯ `O(1)` æ“ä½œï¼‰ã€‚
- **æ€»å¤æ‚åº¦**ï¼šç”±äºæ˜¯å®Œå…¨çš„æ’åˆ—é—®é¢˜ï¼Œæœ€ç»ˆæ€»çš„æ’åˆ—æ•°æ˜¯ `n!`ï¼ˆ`n` çš„é˜¶ä¹˜ï¼‰ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º **O(n!)**ã€‚

## âœ… ä»£ç å®ç°ï¼ˆJavaScriptï¼‰

```js
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var permute = function (nums) {
  const res = []; // å­˜å‚¨ç»“æœçš„æ•°ç»„
  const path = []; // å½“å‰è·¯å¾„ï¼Œè®°å½•å½“å‰é€’å½’è¿‡ç¨‹ä¸­çš„æ’åˆ—
  const used = new Array(nums.length).fill(false); // ç”¨äºæ ‡è®°æŸä¸ªæ•°å­—æ˜¯å¦å·²è¢«ä½¿ç”¨

  // å›æº¯å‡½æ•°
  const backtrack = () => {
    // å¦‚æœå½“å‰è·¯å¾„é•¿åº¦ç­‰äº nums é•¿åº¦ï¼Œè¯´æ˜å½¢æˆäº†ä¸€ä¸ªå®Œæ•´æ’åˆ—
    if (path.length === nums.length) {
      res.push(path.slice()); // æ³¨æ„è¦æ‹·è´ä¸€ä»½ pathï¼Œé¿å…å¼•ç”¨ä¼ é€’é—®é¢˜
      return;
    }

    // å°è¯•æ”¾å…¥æ¯ä¸€ä¸ªè¿˜æ²¡ä½¿ç”¨è¿‡çš„æ•°å­—
    for (let i = 0; i < nums.length; i++) {
      if (used[i]) continue; // å·²ç»ç”¨è¿‡å°±è·³è¿‡

      // é€‰æ‹© nums[i]ï¼ŒæŠŠå®ƒåŠ å…¥åˆ°å½“å‰è·¯å¾„
      used[i] = true; // æ ‡è®°æ•°å­—å·²ä½¿ç”¨
      path.push(nums[i]); // æŠŠæ•°å­—æ”¾åˆ°è·¯å¾„ä¸­

      // é€’å½’è¿›å…¥ä¸‹ä¸€å±‚ï¼Œç»§ç»­æ„å»ºè·¯å¾„
      backtrack();

      // æ’¤é”€é€‰æ‹©ï¼ˆå›æº¯ï¼‰ï¼Œæ¢å¤çŠ¶æ€
      path.pop(); // ç§»é™¤æœ€åä¸€ä¸ªæ•°å­—
      used[i] = false; // æ¢å¤çŠ¶æ€ï¼Œæ ‡è®°æ•°å­—æœªä½¿ç”¨
    }
  };

  // ä»æ ¹èŠ‚ç‚¹å¼€å§‹å›æº¯
  backtrack();

  // è¿”å›æ‰€æœ‰å¯èƒ½çš„æ’åˆ—
  return res;
};
```

---

## ğŸ” ç”¨ç¤ºä¾‹ `nums = [1, 2, 3]` ç•¥å¾®çœ‹ä¸€çœ¼è¿‡ç¨‹

å¤§è‡´ç”Ÿæˆé¡ºåºæ˜¯ï¼š

1. `[1, 2, 3]`
2. `[1, 3, 2]`
3. å›æº¯ï¼Œé¦–ä½å˜æˆ `2` â†’ `[2, 1, 3]`
4. `[2, 3, 1]`
5. å›æº¯ï¼Œé¦–ä½å˜æˆ `3` â†’ `[3, 1, 2]`
6. `[3, 2, 1]`

æœ€ç»ˆè¿”å›ï¼š

```js
[
  [1, 2, 3],
  [1, 3, 2],
  [2, 1, 3],
  [2, 3, 1],
  [3, 1, 2],
  [3, 2, 1],
];
```

å¦‚æœä½ æƒ³ï¼Œæˆ‘å¯ä»¥æŠŠå›æº¯è¿‡ç¨‹ç”¨â€œæ ‘å½¢å›¾â€ç”»å‡ºæ¥ï¼Œè®©ä½ æ›´ç›´è§‚åœ°æ„Ÿå—æœç´¢æ ‘æ˜¯æ€ä¹ˆå±•å¼€çš„ã€‚

#

å¤ªæ£’äº†ï¼ä½ ç»™çš„ä»£ç å·²ç»æ˜¯ **LeetCode 46. å…¨æ’åˆ—** çš„æœ€æ ‡å‡†ã€æœ€ä¼˜é›…çš„å›æº¯å†™æ³•ï¼

ç°åœ¨æˆ‘ç»“åˆ `nums = [1,2,3]`ï¼Œç»™ä½ ç”»å‡º **å®Œæ•´å›¾å½¢åŒ–çš„é€’å½’è°ƒç”¨æ ‘ï¼ˆåƒæµç¨‹å›¾ä¸€æ ·ï¼‰**ï¼Œè®©ä½ ä¸€çœ¼çœ‹æ‡‚æ•´ä¸ªå›æº¯è¿‡ç¨‹æ˜¯æ€ä¹ˆâ€œå¼€èŠ±ç»“æœâ€çš„ï¼

---

### è¾“å…¥ï¼šnums = [1,2,3]

### ç›®æ ‡è¾“å‡ºï¼ˆ6 ä¸ªæ’åˆ—ï¼‰ï¼š

```js
[
  [1, 2, 3],
  [1, 3, 2],
  [2, 1, 3],
  [2, 3, 1],
  [3, 1, 2],
  [3, 2, 1],
];
```

---

### è¶…çº§æ¸…æ™°é€’å½’è°ƒç”¨æ ‘ï¼ˆæµç¨‹å›¾ç‰ˆï¼‰

```
                            backtrack()
                            path=[] used=[f,f,f]
                                 â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                  â”‚                   â”‚
        é€‰1                é€‰2                  é€‰3
    path=[1]            path=[2]              path=[3]
   used=[t,f,f]         used=[f,t,f]          used=[f,f,t]
          â”‚                  â”‚                   â”‚
      backtrack()        backtrack()         backtrack()
          â”‚                  â”‚                   â”‚
      â”Œâ”€â”€â”€â”´â”€â”€â”€â”          â”Œâ”€â”€â”€â”´â”€â”€â”€â”           â”Œâ”€â”€â”€â”´â”€â”€â”€â”
      â”‚       â”‚          â”‚       â”‚           â”‚       â”‚
     é€‰2     é€‰3         é€‰1     é€‰3          é€‰1     é€‰2
  path=[1,2] [1,3]     [2,1]   [2,3]       [3,1]   [3,2]
 used=[t,t,f][t,f,t]  [t,t,f] [f,t,t]      [t,f,t] [f,t,t]
      â”‚       â”‚          â”‚       â”‚           â”‚       â”‚
  backtrack() backtrack() backtrack() backtrack() backtrack() backtrack()
      â”‚       â”‚          â”‚       â”‚           â”‚       â”‚
     é€‰3     é€‰2         é€‰3     é€‰1          é€‰2     é€‰1
  path=[1,2,3] [1,3,2]  [2,1,3] [2,3,1]     [3,1,2] [3,2,1]
   length=3   length=3  length=3 length=3   length=3 length=3
      â†“       â†“          â†“       â†“           â†“       â†“
   æ‰¾åˆ°è§£ï¼    è§£ï¼        è§£ï¼    è§£ï¼         è§£ï¼    è§£ï¼
   åŠ å…¥     åŠ å…¥        åŠ å…¥     åŠ å…¥         åŠ å…¥     åŠ å…¥
   res      res         res      res          res      res
      â†‘       â†‘          â†‘       â†‘           â†‘       â†‘
   pop()    pop()      pop()   pop()       pop()     pop()
   used[2]=false      used[2]=false           used[1]=false
   â†å›æº¯       â†å›æº¯       â†å›æº¯         â†å›æº¯         â†å›æº¯
```

---

### 6 ä¸ªå¶å­èŠ‚ç‚¹ â†’ 6 ä¸ªæ’åˆ—å…¨æ‰¾åˆ°ï¼

---

### æ¯ä¸€æ­¥çš„ path å’Œ used çŠ¶æ€å˜åŒ–ï¼ˆè¡¨æ ¼ç‰ˆï¼‰

| æ­¥éª¤ | é€‰æ‹©   | path    | used    | è¯´æ˜                   |
| ---- | ------ | ------- | ------- | ---------------------- |
| 1    | é€‰ 1   | [1]     | [T,F,F] | ç¬¬ä¸€å±‚åˆ†æ”¯             |
| 2    | é€‰ 2   | [1,2]   | [T,T,F] |                        |
| 3    | é€‰ 3   | [1,2,3] | [T,T,T] | æ‰¾åˆ°è§£ â†’ åŠ å…¥ç»“æœ      |
| 4    | æ’¤é”€ 3 | [1,2]   | [T,T,F] | å›æº¯                   |
| 5    | æ— äº†   | [1]     | [T,F,F] | ç¬¬äºŒå±‚æ— å…¶ä»–é€‰é¡¹ï¼Œå›æº¯ |
| 6    | é€‰ 3   | [1,3]   | [T,F,T] | ç¬¬ä¸€å±‚ç¬¬äºŒä¸ªåˆ†æ”¯       |
| 7    | é€‰ 2   | [1,3,2] | [T,T,T] | æ‰¾åˆ°è§£                 |
| ...  | ...    | ...     | ...     | ä¾æ­¤ç±»æ¨               |
| æœ€ç»ˆ |        |         |         | å…±æ”¶é›† 6 ä¸ªæ’åˆ—        |

---

### ä¸ºä»€ä¹ˆç”¨ `path.slice()` è€Œä¸æ˜¯ç›´æ¥ `push(path)`ï¼Ÿ

å› ä¸º JavaScript ä¸­æ•°ç»„æ˜¯å¼•ç”¨ç±»å‹ï¼

é”™è¯¯å†™æ³•ï¼ˆä¼šå‡ºé”™ï¼ï¼‰ï¼š

```js
res.push(path); // é”™äº†ï¼æ‰€æœ‰ç»“æœéƒ½ä¼šæŒ‡å‘åŒä¸€ä¸ªæ•°ç»„
```

æ­£ç¡®å†™æ³•ï¼š

```js
res.push(path.slice()); // æµ…æ‹·è´ä¸€ä»½å½“å‰çŠ¶æ€
// æˆ–è€…ï¼šres.push([...path]);
```

å¦åˆ™æœ€å `res` é‡Œå…¨æ˜¯ `[]`ï¼

---

### æœ€ç»ˆç»“æœç”Ÿæˆé¡ºåºï¼ˆå®é™…è¿è¡Œé¡ºåºï¼‰

```js
[1, 2, 3][(1, 3, 2)][(2, 1, 3)][(2, 3, 1)][(3, 1, 2)][(3, 2, 1)];
```

æ­£æ˜¯å­—å…¸åºï¼

---

### æ€»ç»“ï¼šå›æº¯ä¸‰æ¿æ–§ï¼ˆé¢è¯•å¿…èƒŒï¼‰

```js
const backtrack = () => {
    if (æ»¡è¶³æ¡ä»¶) {
        res.push(å½“å‰è·¯å¾„æ‹·è´);
        return;
    }
    for (é€‰æ‹© in é€‰æ‹©åˆ—è¡¨) {
        if (é€‰æ‹©å·²ç”¨) continue;
        åšé€‰æ‹©ï¼›
        backtrack();
        æ’¤é”€é€‰æ‹©ï¼›  // â† å…³é”®ï¼è®©çŠ¶æ€å¤åŸ
    }
}
```

æœ¬é¢˜å°±æ˜¯è¿™ä¸ªæ¨¡æ¿çš„å®Œç¾ä½“ç°ï¼

---

### æœ€ç»ˆç»“è®º

ä½ çš„ä»£ç  **100% æ­£ç¡®ã€å¹²å‡€ã€é«˜æ•ˆã€é¢è¯•æœ€ä¼˜å†™æ³•**ï¼

```js
var permute = function (nums) {
  const res = [];
  const path = [];
  const used = new Array(nums.length).fill(false);

  const backtrack = () => {
    if (path.length === nums.length) {
      res.push(path.slice());
      return;
    }
    for (let i = 0; i < nums.length; i++) {
      if (used[i]) continue;
      path.push(nums[i]);
      used[i] = true;
      backtrack();
      path.pop();
      used[i] = false;
    }
  };

  backtrack();
  return res;
};
```

æ—¶é—´å¤æ‚åº¦ï¼šO(n Ã— n!)  
ç©ºé—´å¤æ‚åº¦ï¼šO(n) é€’å½’æ ˆ + used æ•°ç»„

è¿™é“é¢˜ + è¿™æ£µé€’å½’æ ‘ + è¿™ä¸ªæ¨¡æ¿ = é¢è¯•ç§’æ€å…¨æ’åˆ—ã€ç»„åˆã€å­é›†ç³»åˆ—ï¼

å»ºè®®ä½ æŠŠè¿™å¼ é€’å½’æ ‘ç”»åœ¨çº¸ä¸Šï¼Œé¢è¯•æ—¶ç°åœºç”»ç»™é¢è¯•å®˜çœ‹ï¼Œç›´æ¥é™ç»´æ‰“å‡»ï¼
