# K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨

ç»™ä½ é“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ï¼Œæ¯ `k` ä¸ªèŠ‚ç‚¹ä¸€ç»„è¿›è¡Œç¿»è½¬ï¼Œè¯·ä½ è¿”å›ä¿®æ”¹åçš„é“¾è¡¨ã€‚

`k` æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå®ƒçš„å€¼å°äºæˆ–ç­‰äºé“¾è¡¨çš„é•¿åº¦ã€‚

å¦‚æœèŠ‚ç‚¹æ€»æ•°ä¸æ˜¯ `k` çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆè¯·å°†æœ€åå‰©ä½™çš„èŠ‚ç‚¹ä¿æŒåŸæœ‰é¡ºåºã€‚

ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚

## ç¤ºä¾‹ 1ï¼š

![](./img2/c1.png)

è¾“å…¥ï¼š`head = [1,2,3,4,5], k = 2`

è¾“å‡ºï¼š`[2,1,4,3,5]`

## ç¤ºä¾‹ 2ï¼š

![](./img2/c2.png)

è¾“å…¥ï¼š`head = [1,2,3,4,5], k = 3`

è¾“å‡ºï¼š`[3,2,1,4,5]`

# Problem Solving

## ideas

### è¿™é¢˜åˆ°åº•åœ¨åšä»€ä¹ˆï¼Ÿ

é¢˜ç›®è¦æ±‚ï¼š**æ¯ k ä¸ªèŠ‚ç‚¹ä¸ºä¸€ç»„åè½¬**ï¼Œå‰©ä½™ä¸è¶³ k ä¸ªçš„ä¸åŠ¨ã€‚

æ‰€ä»¥æˆ‘ä»¬è¦ä¸æ–­é‡å¤åšè¿™ä»¶äº‹ï¼š

1. **ç¡®è®¤è¿™ä¸€ç»„æ˜¯å¦å¤Ÿ k ä¸ª**
2. **å¦‚æœå¤Ÿï¼šåªåè½¬è¿™ä¸€æ®µ**
3. **æŠŠåè½¬åçš„è¿™ä¸€æ®µæ¥å›å»**
4. **æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€ç»„ç»§ç»­**

---

### 3ï¼‰ä¸ºä»€ä¹ˆä¸€å®šè¦ç”¨ dummyï¼Ÿ

å› ä¸ºç¬¬ä¸€ç»„åè½¬åï¼Œé“¾è¡¨å¤´ä¼šå˜ã€‚

ä¸¾ä¾‹ï¼š`1->2->3->4`, k=2
ç¬¬ä¸€ç»„åè½¬åå˜æˆ `2->1->...`
å¤´ä» `1` å˜æˆ `2`ï¼Œå¦‚æœæ²¡æœ‰ dummyï¼Œä½ ä¼šå¾ˆéº»çƒ¦åœ°ç‰¹æ®Šå¤„ç†â€œå¤´èŠ‚ç‚¹å˜åŒ–â€ã€‚

dummy è®©ä½ æ°¸è¿œç”¨åŒä¸€ç§â€œæ¥é“¾â€æ–¹å¼ï¼š

* `prevGroupEnd.next = reversedHead`

---

### 4ï¼‰ä¸ºä»€ä¹ˆè¦æ‰¾ kthï¼ˆç¬¬ k ä¸ªèŠ‚ç‚¹ï¼‰ï¼Ÿ

ä½ å¿…é¡»å…ˆç¡®è®¤è¿™ä¸€ç»„æœ‰ k ä¸ªèŠ‚ç‚¹ï¼Œå¦åˆ™ä¸èƒ½åè½¬ã€‚

è€Œä¸” kth è¿˜èƒ½å¸®ä½ å®šä½è¾¹ç•Œï¼š

* æœ¬ç»„ï¼š`groupStart ... kth`
* ä¸‹ä¸€ç»„èµ·ç‚¹ï¼š`kth.next`

---

### 5ï¼‰ä¸ºä»€ä¹ˆè¦å…ˆæ–­å¼€ `kth.next = null`ï¼Ÿ

è¿™æ˜¯ä¸ºäº†è®© `reverseList(groupStart)` **åªåè½¬æœ¬ç»„**ã€‚

ä¸æ–­å¼€ä¼šæ€æ ·ï¼Ÿ

* `reverseList` ä¼šä¸€ç›´åè½¬åˆ°é“¾è¡¨æœ«å°¾
* ä½ æœ¬æ¥åªæƒ³åè½¬ k ä¸ªï¼Œç»“æœæŠŠåé¢ä¹Ÿå·è¿›å»äº†

æ–­å¼€åï¼Œæœ¬ç»„æˆäº†ä¸€ä¸ªç‹¬ç«‹å°é“¾è¡¨ï¼š

```
groupStart -> ... -> kth -> null
```

åè½¬å®‰å…¨ã€èŒƒå›´æ˜ç¡®ã€‚

> å½“ç„¶ä¹Ÿæœ‰â€œä¸éœ€è¦æ–­å¼€â€çš„å†™æ³•ï¼ˆç”¨è¾¹ç•ŒæŒ‡é’ˆæ§åˆ¶åè½¬ï¼‰ï¼Œä½†ä½ è¿™ç‰ˆç”¨æ–­å¼€æ›´ç›´è§‚ã€‚

---

### 6ï¼‰æ¥å›å»æ—¶ï¼Œä¸ºä»€ä¹ˆæ˜¯è¿™ä¸¤å¥ï¼Ÿ

```js
prevGroupEnd.next = reversedHead;
groupStart.next = nextGroupStart;
```

å…³é”®ç‚¹ï¼š**groupStart åœ¨åè½¬åå˜æˆå°¾å·´**ã€‚

åè½¬å‰ï¼š

* å¤´ï¼šgroupStart
* å°¾ï¼škth

åè½¬åï¼š

* å¤´ï¼šreversedHeadï¼ˆåŸ kthï¼‰
* å°¾ï¼šgroupStartï¼ˆåŸå¤´ï¼‰

æ‰€ä»¥ï¼š

* å‰é¢é“¾è¡¨è¦è¿åˆ°â€œæ–°å¤´â€ï¼š`prevGroupEnd.next = reversedHead`
* â€œæ–°å°¾â€ï¼ˆgroupStartï¼‰è¦è¿å›åé¢ï¼š`groupStart.next = nextGroupStart`

---

### 7ï¼‰ä¸ºä»€ä¹ˆ `prevGroupEnd = groupStart`ï¼Ÿ

å› ä¸º groupStart åè½¬åå·²ç»æ˜¯**å½“å‰ç»„çš„å°¾èŠ‚ç‚¹**ã€‚
ä¸‹ä¸€è½®è¦ä»â€œä¸Šä¸€ç»„å°¾èŠ‚ç‚¹â€å‡ºå‘ç»§ç»­æ‰¾ç¬¬ k ä¸ªï¼Œæ‰€ä»¥æ›´æ–°å®ƒã€‚

---

### 8ï¼‰è¿™é¢˜çš„â€œæŒ‡é’ˆä¸å˜é‡â€ï¼ˆç†è§£åå°±ä¸å®¹æ˜“å†™é”™ï¼‰

æ¯è½®å¾ªç¯å¼€å§‹æ—¶ï¼Œä¿è¯ï¼š

* `prevGroupEnd` æ°¸è¿œæŒ‡å‘ï¼š**å·²ç»å¤„ç†å¥½çš„éƒ¨åˆ†çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹**
* `prevGroupEnd.next` æ°¸è¿œæ˜¯ï¼š**ä¸‹ä¸€ç»„çš„èµ·ç‚¹ï¼ˆå¾…å¤„ç†ï¼‰**

æ¯è½®ç»“æŸæ—¶ï¼Œä»ç„¶ä¿æŒè¿™ä¸ªäº‹å®ï¼ˆåªæ˜¯å¤„ç†å¥½çš„éƒ¨åˆ†å˜é•¿äº†ï¼‰ã€‚

---

### 9ï¼‰ä½ å¯ä»¥èƒŒçš„æ¨¡æ¿ï¼ˆé¢è¯•/åˆ·é¢˜å¾ˆå®ç”¨ï¼‰

**åˆ†ç»„åè½¬é“¾è¡¨æ¨¡æ¿ï¼š**

1. dummy + prevGroupEnd
2. å¾ªç¯ï¼š

   * æ‰¾ kthï¼ˆä¸è¶³ k breakï¼‰
   * groupStart = prevGroupEnd.next
   * nextGroupStart = kth.next
   * kth.next = nullï¼ˆåˆ‡æ®µï¼‰
   * reversedHead = reverseList(groupStart)
   * prevGroupEnd.next = reversedHead
   * groupStart.next = nextGroupStart
   * prevGroupEnd = groupStart
3. return dummy.next



## code

```js
/**
 * Definition for singly-linked list.
 * function ListNode(val, next) {
 *     this.val = (val===undefined ? 0 : val)
 *     this.next = (next===undefined ? null : next)
 * }
 */
/**
 * @param {ListNode} head
 * @param {number} k
 * @return {ListNode}
 */
```

```js
var reverseKGroup = function (head, k) {
  // è¾¹ç•Œï¼šç©ºé“¾è¡¨ æˆ– k=1 ä¸éœ€è¦åè½¬
  if (head === null || k <= 1) return head;

  // 1ï¸âƒ£ dummyï¼šè™šæ‹Ÿå¤´èŠ‚ç‚¹
  // ä½œç”¨ï¼šç»Ÿä¸€å¤„ç†â€œç¬¬ä¸€ç»„åè½¬åå¤´èŠ‚ç‚¹æ”¹å˜â€çš„æƒ…å†µ
  let dummy = new ListNode(0);
  dummy.next = head;

  // 2ï¸âƒ£ prevGroupEndï¼šä¸Šä¸€ç»„åè½¬å®Œæˆåçš„â€œå°¾èŠ‚ç‚¹â€
  // åˆå§‹æ—¶ä¸Šä¸€ç»„å°±æ˜¯ dummyï¼ˆç›¸å½“äºåœ¨ head å‰é¢ï¼‰
  let prevGroupEnd = dummy;

  while (true) {
    // 3ï¸âƒ£ æ‰¾åˆ°æœ¬ç»„çš„ç¬¬ k ä¸ªèŠ‚ç‚¹ kthï¼ˆä» prevGroupEnd å‡ºå‘å¾€åèµ° k æ­¥ï¼‰
    // å¦‚æœèƒ½èµ°åˆ° kthï¼Œè¯´æ˜è¿™ä¸€ç»„å‡‘é½ k ä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥åè½¬
    let kth = prevGroupEnd;
    for (let i = 0; i < k && kth !== null; i++) {
      kth = kth.next;
    }

    // 4ï¸âƒ£ å¦‚æœ kth ä¸º nullï¼Œè¯´æ˜å‰©ä½™èŠ‚ç‚¹ä¸è¶³ k ä¸ªï¼ŒæŒ‰é¢˜æ„ä¸åè½¬ï¼Œç›´æ¥ç»“æŸ
    if (kth === null) break;

    // 5ï¸âƒ£ ç¡®å®šè¿™ä¸€ç»„çš„è¾¹ç•Œ
    // groupStartï¼šè¿™ä¸€ç»„çš„ç¬¬ 1 ä¸ªèŠ‚ç‚¹ï¼ˆä¹Ÿå°±æ˜¯ prevGroupEnd åé¢é‚£ä¸ªï¼‰
    let groupStart = prevGroupEnd.next;

    // nextGroupStartï¼šä¸‹ä¸€ç»„çš„èµ·ç‚¹ï¼ˆä¹Ÿå°±æ˜¯ kth åé¢é‚£ä¸ªï¼‰
    let nextGroupStart = kth.next;

    // 6ï¸âƒ£ å…³é”®ï¼šå…ˆæŠŠè¿™ä¸€ç»„â€œä»åŸé“¾è¡¨é‡Œæš‚æ—¶åˆ‡ä¸‹æ¥â€
    // æ–­å¼€åï¼Œæœ¬ç»„å˜æˆä¸€ä¸ªç‹¬ç«‹é“¾è¡¨ï¼šgroupStart ... kth -> null
    // è¿™æ · reverseList åªä¼šåè½¬è¿™ä¸€æ®µï¼Œä¸ä¼šè¶Šç•Œåè½¬åˆ°åé¢çš„èŠ‚ç‚¹
    kth.next = null;

    // 7ï¸âƒ£ åè½¬è¿™ä¸€ç»„ï¼ˆåè½¬åè¿”å›æ–°å¤´ reversedHeadï¼‰
    let reversedHead = reverseList(groupStart);

    // 8ï¸âƒ£ æŠŠåè½¬åçš„è¿™ä¸€ç»„æ¥å›åŸé“¾è¡¨
    // prevGroupEnd.next æŒ‡å‘è¿™ä¸€ç»„åè½¬åçš„æ–°å¤´
    prevGroupEnd.next = reversedHead;

    // æ³¨æ„ï¼šgroupStart åè½¬å‰æ˜¯å¤´ï¼Œåè½¬åå˜æˆå°¾
    // æ‰€ä»¥è®©â€œåè½¬åçš„å°¾ï¼ˆgroupStartï¼‰â€æ¥åˆ°ä¸‹ä¸€ç»„èµ·ç‚¹
    groupStart.next = nextGroupStart;

    // 9ï¸âƒ£ æ›´æ–° prevGroupEndï¼Œä¸ºä¸‹ä¸€è½®åšå‡†å¤‡
    // ä¸‹ä¸€ç»„çš„ prevGroupEnd åº”è¯¥æ˜¯â€œå½“å‰ç»„åè½¬åçš„å°¾â€ï¼Œä¹Ÿå°±æ˜¯ groupStart
    prevGroupEnd = groupStart;
  }

  // dummy.next æ˜¯æ–°çš„å¤´èŠ‚ç‚¹ï¼ˆç¬¬ä¸€ç»„å¯èƒ½è¢«åè½¬è¿‡ï¼‰
  return dummy.next;
};

function reverseList(head) {
  // prev æŒ‡å‘å·²åè½¬å¥½çš„éƒ¨åˆ†çš„å¤´
  let prev = null;
  // curr æŒ‡å‘æ­£åœ¨å¤„ç†çš„èŠ‚ç‚¹
  let curr = head;

  while (curr !== null) {
    // å…ˆä¿å­˜ curr çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦åˆ™ä¸€æ”¹æŒ‡é’ˆå°±ä¸¢é“¾
    let nextNode = curr.next;

    // åè½¬æŒ‡å‘ï¼šè®© curr.next æŒ‡å‘ prev
    curr.next = prev;

    // prev å’Œ curr åŒæ­¥å¾€å‰æ¨è¿›
    prev = curr;
    curr = nextNode;
  }

  // prev æœ€ç»ˆæ˜¯æ–°å¤´
  return prev;
}
```

ä¸‹é¢æˆ‘ä¼šç»“åˆ **å®Œæ•´æ¡ˆä¾‹**ï¼Œä¸€æ­¥ä¸€æ­¥ **å¯è§†åŒ–è§£é‡Š** ä½ ç»™å‡ºçš„ä»£ç ï¼Œè®©ä½ å½»åº•ç†è§£æ¯ä¸ªå˜é‡çš„ä½œç”¨ã€æŒ‡é’ˆç§»åŠ¨æ–¹å¼ã€é“¾è¡¨æ–­å¼€ä¸æ¥å›çš„ç»†èŠ‚ã€‚

---

# âœ… **æ¡ˆä¾‹ï¼šè¾“å…¥é“¾è¡¨ä¸ k**

å‡è®¾é“¾è¡¨ä¸ºï¼š

```
1 â†’ 2 â†’ 3 â†’ 4 â†’ 5
```

å¹¶ä¸”ï¼š

```
k = 2
```

ç›®æ ‡ï¼šæ¯ 2 ä¸ªèŠ‚ç‚¹åè½¬ä¸€æ¬¡ï¼š

```
(1 2)  â†’  (3 4)  â†’ (5)
â†“        â†“         â†“
2 1     4 3       5    ï¼ˆæœ€å 1 ä¸ªä¸è¶³ kï¼Œä¸åè½¬ï¼‰
```

æœ€ç»ˆè¾“å‡ºï¼š

```
2 â†’ 1 â†’ 4 â†’ 3 â†’ 5
```

---

# ğŸ” **ç¬¬ä¸€æ­¥ï¼šåˆ›å»º dummy èŠ‚ç‚¹ï¼ˆè™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼‰**

```js
let dummy = new ListNode(0);
dummy.next = head; // æŒ‡å‘ 1
let prevGroupEnd = dummy; // æŒ‡å‘ dummy
```

é“¾è¡¨ç°åœ¨ï¼š

```
dummy â†’ 1 â†’ 2 â†’ 3 â†’ 4 â†’ 5
â†‘
prevGroupEnd
```

è¿™æ ·åšçš„å¥½å¤„ï¼šå“ªæ€•ç¬¬ä¸€ç»„çš„å¤´èŠ‚ç‚¹è¦è¢«åè½¬ï¼Œä¹Ÿèƒ½æ­£å¸¸å¤„ç†ã€‚

---

# ğŸ” **ç¬¬äºŒæ­¥ï¼šå¯»æ‰¾æœ¬ç»„çš„ç¬¬ k ä¸ªèŠ‚ç‚¹ï¼ˆç¬¬ 2 ä¸ªï¼‰**

```js
let kth = prevGroupEnd;
for (let i = 0; i < k; i++) kth = kth.next;
```

éå†ï¼š

```
i=0: kth = 1
i=1: kth = 2
```

å› æ­¤æœ¬ç»„æ˜¯ï¼š

```
1 â†’ 2
â†‘   â†‘
start  kth
```

ä¸‹ä¸€ç»„çš„èµ·ç‚¹ï¼š

```js
let nextGroupStart = kth.next; // nextGroupStart = 3
```

ç°åœ¨ï¼š

```
dummy â†’ 1 â†’ 2 â†’ 3 â†’ 4 â†’ 5
                 â†‘
         nextGroupStart
```

---

# ğŸ” **ç¬¬ä¸‰æ­¥ï¼šæ–­å¼€æœ¬ç»„é“¾è¡¨**

```js
kth.next = null;
```

æ–­å¼€åé“¾è¡¨åˆ†æˆä¸¤æ®µï¼š

```
dummy â†’ 1 â†’ 2 â†’ null

3 â†’ 4 â†’ 5
```

è¿™ä¸€æ®µå‡†å¤‡è¢«åè½¬ï¼š

```
1 â†’ 2 â†’ null
```

---

# ğŸ” **ç¬¬å››æ­¥ï¼šåè½¬æœ¬ç»„ï¼ˆ1, 2ï¼‰**

è°ƒç”¨ï¼š

```js
let reversedHead = reverseList(groupStart);
```

åè½¬è¿‡ç¨‹ï¼š

```
1 â†’ 2 â†’ null

å˜ä¸º

2 â†’ 1 â†’ null
```

---

# ğŸ”— **ç¬¬äº”æ­¥ï¼šæ¥å›ä¸»é“¾è¡¨**

å½“å‰æƒ…å†µï¼š

```
dummy â†’ ?  â†’  ?      â†’ 3 â†’ 4 â†’ 5
          â†‘    â†‘
 reversedHead  groupStart(=1)
```

æ¥å›ï¼š

### â‘  è®©ä¸Šä¸€ç»„çš„æœ«å°¾è¿æ¥åè½¬åçš„å¤´èŠ‚ç‚¹

```js
prevGroupEnd.next = reversedHead;
```

å˜ä¸ºï¼š

```
dummy â†’ 2 â†’ 1 â†’ null
```

### â‘¡ æœ¬ç»„çš„å°¾èŠ‚ç‚¹ï¼ˆåŸ groupStart ï¼ 1ï¼‰è¿æ¥ä¸‹ä¸€ç»„èµ·ç‚¹

```js
groupStart.next = nextGroupStart;
```

å³ï¼š

```
1.next = 3
```

ç°åœ¨é“¾è¡¨æ¢å¤æˆï¼š

```
dummy â†’ 2 â†’ 1 â†’ 3 â†’ 4 â†’ 5
```

---

# ğŸ”„ **ç¬¬å…­æ­¥ï¼šç§»åŠ¨ prevGroupEnd åˆ°æœ¬ç»„æœ«å°¾ï¼ˆä¹Ÿå°±æ˜¯ 1ï¼‰**

```js
prevGroupEnd = groupStart; // groupStart = 1
```

ç°åœ¨ï¼š

```
dummy â†’ 2 â†’ 1 â†’ 3 â†’ 4 â†’ 5
              â†‘
       prevGroupEnd
```

è¿›å…¥ä¸‹ä¸€è½® while å¾ªç¯å¤„ç† `(3,4)`ã€‚

---

# ğŸŒ€ **ç¬¬äºŒè½®ï¼šå¤„ç† 3 â†’ 4**

é‡å¤ç›¸åŒé€»è¾‘ï¼š

- æ‰¾åˆ°ç¬¬ k ä¸ªèŠ‚ç‚¹ï¼ˆ4ï¼‰
- æ–­å¼€ 3 â†’ 4
- åè½¬ä¸º 4 â†’ 3
- æ¥å›é“¾è¡¨

ç»“æœå˜ä¸ºï¼š

```
2 â†’ 1 â†’ 4 â†’ 3 â†’ 5
```

---

# ğŸ§© **ç¬¬ä¸‰è½®ï¼šå¤„ç†å‰©ä½™çš„ 5**

å¯»æ‰¾ç¬¬ k=2 ä¸ªèŠ‚ç‚¹æ—¶ï¼š

```
kth èµ°åˆ° 5 â†’ null
ç¬¬äºŒæ­¥æ‰¾ä¸åˆ°ç¬¬ 2 ä¸ªèŠ‚ç‚¹ï¼ˆnullï¼‰
```

ä»£ç æ‰§è¡Œï¼š

```js
if (kth === null) break;
```

é€€å‡ºå¾ªç¯ï¼Œåé¢çš„ 5 ä¿æŒåŸæ ·ã€‚

---

# ğŸ‰ æœ€ç»ˆç»“æœ

```
2 â†’ 1 â†’ 4 â†’ 3 â†’ 5
```

å®Œå…¨ç¬¦åˆé¢˜æ„ï¼

---

# ğŸ“ æ€»ç»“ï¼šå…³é”®æ€æƒ³

| æ­¥éª¤              | æ„ä¹‰                   |
| ----------------- | ---------------------- |
| dummy èŠ‚ç‚¹        | ç»Ÿä¸€å¤´éƒ¨å¤„ç†           |
| æ‰¾ kth èŠ‚ç‚¹       | ç¡®è®¤æœ¬ç»„æ˜¯å¦æ»¡è¶³ k ä¸ª  |
| æ–­å¼€é“¾è¡¨          | é˜²æ­¢åè½¬æ—¶å½±å“å…¶ä»–èŠ‚ç‚¹ |
| reverseList       | åè½¬æœ¬ç»„               |
| æ¥å›é“¾è¡¨          | æ‹¼æ¥æˆå®Œæ•´é“¾è¡¨         |
| ç§»åŠ¨ prevGroupEnd | ä¸ºä¸‹ä¸€ç»„åšå‡†å¤‡         |

---

å¦‚æœä½ æƒ³ï¼Œæˆ‘è¿˜å¯ä»¥ï¼š

âœ… ç”¨ **å›¾ç¤ºåŠ¨ç”»æ–¹å¼** è§£é‡ŠæŒ‡é’ˆç§»åŠ¨
âœ… æä¾› **æ‰‹å†™æ¨¡æ‹Ÿè¡¨æ ¼** è¿½è¸ªå˜é‡
âœ… å†è®²ä¸€ç‰ˆ **é€’å½’å†™æ³•**
ä½ æƒ³çœ‹å“ªç§ï¼Ÿ

#

å¤ªå¥½äº†ï¼ä½ è¿™æ®µä»£ç æ˜¯å¦ä¸€ç§éå¸¸æ¸…æ™°ã€å®¹æ˜“ç†è§£çš„å†™æ³•â€”â€”**ã€Œå…ˆæ•´ä½“åè½¬æ¯ç»„ï¼Œå†é‡æ–°æ‹¼æ¥ã€**ï¼Œç‰¹åˆ«é€‚åˆåˆå­¦è€…å’Œé¢è¯•æ—¶å¿«é€Ÿå†™å‡ºæ­£ç¡®ä»£ç ã€‚

æˆ‘ä»¬ç”¨ä¸€ä¸ªç»å…¸ä¾‹å­ï¼Œæ‰‹æŠŠæ‰‹æŠŠæ¯ä¸€è¡Œä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ç”»å‡ºæ¥ï¼Œè®©ä½ å½»åº•çœ‹æ‡‚ï¼

### æµ‹è¯•æ¡ˆä¾‹ï¼ˆå¼ºçƒˆæ¨èä½ è¾¹çœ‹è¾¹åœ¨çº¸ä¸Šç”»ï¼‰

è¾“å…¥é“¾è¡¨ï¼š`1 â†’ 2 â†’ 3 â†’ 4 â†’ 5 â†’ 6 â†’ 7`  
k = 3  
æœŸæœ›è¾“å‡ºï¼š`3 â†’ 2 â†’ 1 â†’ 6 â†’ 5 â†’ 4 â†’ 7`

---

### åˆå§‹çŠ¶æ€ï¼ˆåŠ ä¸€ä¸ª dummy å“¨å…µèŠ‚ç‚¹ï¼‰

```
dummy â†’ 1 â†’ 2 â†’ 3 â†’ 4 â†’ 5 â†’ 6 â†’ 7 â†’ null
â†‘
prevGroupEndï¼ˆæœ€åˆæŒ‡å‘ dummyï¼‰
```

---

### ç¬¬ 1 è½®å¾ªç¯ï¼ˆå¤„ç†å‰ 9 ä¸ªèŠ‚ç‚¹ï¼ˆ1~3ï¼‰

```js
let kth = prevGroupEnd; // kth = dummy
for (let i = 0; i < 3 && kth !== null; i++) {
  kth = kth.next; // èµ°3æ­¥ â†’ 1â†’2â†’3
}
// ç°åœ¨ kth æŒ‡å‘èŠ‚ç‚¹ 3
```

```js
let groupStart = prevGroupEnd.next; // â†’ 1ï¼ˆè¿™ç»„çš„åŸæ¥å¤´ï¼‰
let nextGroupStart = kth.next; // â†’ 4ï¼ˆä¸‹ä¸€ç»„çš„å¤´ï¼‰
```

å…³é”®æ“ä½œæ¥äº†ï¼š

```js
kth.next = null; // æŠŠç¬¬3ä¸ªèŠ‚ç‚¹çš„nextæ–­å¼€ï¼
// ç°åœ¨é“¾è¡¨å˜æˆï¼š
// dummy â†’ 1 â†’ 2 â†’ 3 â†’ null    å’Œ    4 â†’ 5 â†’ 6 â†’ 7 â†’ null  åˆ†ç¦»äº†ï¼
```

```js
let reversedHead = reverseList(groupStart); // åè½¬ 1â†’2â†’3â†’null
```

#### reverseList å†…éƒ¨è¿‡ç¨‹ï¼š

```
åˆå§‹ï¼š head=1, prev=null

ç¬¬1æ­¥ï¼šcurr=1 â†’ 1.next=null, prev=1, curr=2
é“¾è¡¨ï¼š1 â† 2 â†’ 3

ç¬¬2æ­¥ï¼šcurr=2 â†’ 2.next=1,  prev=2, curr=3
é“¾è¡¨ï¼š1 â† 2 â† 3

ç¬¬3æ­¥ï¼šcurr=3 â†’ 3.next=2,  prev=3, curr=null
é“¾è¡¨ï¼š1 â† 2 â† 3
             â†‘
            prevï¼ˆè¿”å›å®ƒä½œä¸ºæ–°å¤´ï¼‰
```

æ‰€ä»¥ `reversedHead = 3`

---

### æ¥å›å»ï¼

```js
prevGroupEnd.next = reversedHead; // dummy.next = 3
// ç°åœ¨ï¼šdummy â†’ 3 â†’ 2 â†’ 1 â†’ null

groupStart.next = nextGroupStart; // groupStart æ˜¯åŸæ¥çš„1ï¼Œç°åœ¨æ˜¯å°¾å·´
// 1.next = 4
// ç°åœ¨å®Œæ•´é“¾è¡¨å˜æˆï¼šdummy â†’ 3 â†’ 2 â†’ 1 â†’ 4 â†’ 5 â†’ 6 â†’ 7
```

```js
prevGroupEnd = groupStart; // groupStartæ˜¯1ï¼Œç°åœ¨æ˜¯è¿™ç»„çš„å°¾å·´
// prevGroupEnd ç§»åŠ¨åˆ° 1ï¼Œå‡†å¤‡å¤„ç†ä¸‹ä¸€ç»„
```

ç¬¬ 1 è½®ç»“æŸï¼Œå½“å‰é“¾è¡¨çŠ¶æ€ï¼š

```
dummy â†’ 3 â†’ 2 â†’ 1 â†’ 4 â†’ 5 â†’ 6 â†’ 7
                â†‘
         prevGroupEndï¼ˆæŒ‡å‘1ï¼‰
```

å®Œç¾ï¼ç¬¬ä¸€ç»„å·²ç»åè½¬å¥½äº†

---

### ç¬¬ 2 è½®å¾ªç¯ï¼ˆå¤„ç† 4~6ï¼‰

```js
kth ä» prevGroupEnd=1 å¼€å§‹èµ°3æ­¥ï¼š1â†’4â†’5â†’6 â†’ kth=6
nextGroupStart = 6.next â†’ 7

kth.next = null; // 6.nextæ–­å¼€
// ç°åœ¨æœ¬ç»„ç‹¬ç«‹ï¼š4 â†’ 5 â†’ 6 â†’ null
```

åè½¬å¾—åˆ°ï¼š`6 â†’ 5 â†’ 4`

æ¥å›å»ï¼š

```js
prevGroupEnd.next = 6        // 1 â†’ 6 â†’ 5 â†’ 4
groupStart=4ï¼ˆåŸå¤´ï¼‰.next = 7 // 4 â†’ 7
prevGroupEnd = groupStart;   // prevGroupEnd ç§»åˆ° 4
```

ç°åœ¨é“¾è¡¨å˜æˆï¼š

```
dummy â†’ 3â†’2â†’1â†’6â†’5â†’4â†’7
                  â†‘
             prevGroupEndï¼ˆæŒ‡å‘4ï¼‰
```

---

### ç¬¬ 3 è½®å¾ªç¯

ä» `prevGroupEnd=4` å¼€å§‹æ•° k=3 æ­¥ï¼š

4 â†’ 7 â†’ null â†’ èµ°ä¸åŠ¨äº† â†’ kth = null â†’ å¾ªç¯ break

ç»“æŸï¼

æœ€ç»ˆè¿”å› `dummy.next` â†’ `3â†’2â†’1â†’6â†’5â†’4â†’7`

å®Œå…¨æ­£ç¡®ï¼

---

### æ€»ç»“ï¼šè¿™ç‰ˆä»£ç çš„ä¼˜ç‚¹å’Œå…³é”®ç‚¹

| ç‰¹ç‚¹           | è¯´æ˜                                                                                      |
| -------------- | ----------------------------------------------------------------------------------------- |
| è¶…çº§å¥½ç†è§£     | å…ˆæŠŠæ¯ç»„â€œå‰ªä¸‹æ¥â€ï¼Œåè½¬ï¼Œå†æ¥å›å»ï¼Œåƒæ­ç§¯æœ¨                                                |
| å…³é”®æŠ€å·§       | `kth.next = null` ä¸´æ—¶æ–­å¼€ï¼Œé˜²æ­¢åè½¬æ—¶å½±å“åé¢                                            |
| å˜é‡å«ä¹‰æ¸…æ™°   | `prevGroupEnd`ï¼šä¸Šä¸€ç»„çš„ç»“å°¾ï¼ˆä¹Ÿæ˜¯ä¸‹ä¸€ç»„çš„å‰å¯¼ï¼‰<br>`groupStart`ï¼šæœ¬ç»„åŸå¤´ â†’ åè½¬åå˜å°¾å·´ |
| é€‚åˆæ•™å­¦å’Œé¢è¯• | é¢è¯•å®˜çœ‹åˆ°ä½ è¿™ä¹ˆå†™ï¼Œä¼šè§‰å¾—ä½ æ€è·¯ç‰¹åˆ«æ¸…æ¥š                                                  |

---

### ä¸¤ç§ç»å…¸å†™æ³•å¯¹æ¯”ï¼ˆå»ºè®®éƒ½æŒæ¡ï¼‰

| å†™æ³•                       | ç‰¹ç‚¹                          | æ¨èåœºæ™¯               |
| -------------------------- | ----------------------------- | ---------------------- |
| ä½ è¿™ç‰ˆï¼ˆæ–­å¼€ + æ•´ä½“åè½¬ï¼‰  | æœ€å®¹æ˜“è®²æ˜ç™½ï¼Œä»£ç ç»“æ„æ¸…æ™°    | é¢è¯•å¿…å¤‡ï¼Œæ•™å­¦é¦–é€‰     |
| ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼ˆè¾¹éå†è¾¹åè½¬ï¼‰ | ç©ºé—´ O(1)ï¼Œæ›´â€œåŸåœ°â€ï¼Œæ•ˆç‡ç•¥é«˜ | è¿½æ±‚æè‡´æ€§èƒ½ã€å¤§å‚é«˜é¢‘ |

ä¸¤è€…éƒ½å¯¹ï¼Œéƒ½èƒ½ ACï¼Œé€‰ä½ å–œæ¬¢çš„å°±è¡Œï¼

ä½ å·²ç»å½»åº•æŒæ¡è¿™é¢˜äº†ï¼ä¸‹æ¬¡é¢è¯•ç›´æ¥æ‰‹æ’•è¿™ç‰ˆï¼Œé¢è¯•å®˜ç»å¯¹åŠ åˆ†ï¼
