# é¢˜
ç»™ä½ ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚

å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª next æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œè¯„æµ‹ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚æ³¨æ„ï¼špos ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ ã€‚ä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚

å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯ ï¼Œåˆ™è¿”å› true ã€‚ å¦åˆ™ï¼Œè¿”å› false ã€‚

## ç¤ºä¾‹ 1ï¼š

![](./img/d1.png)

è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1
è¾“å‡ºï¼štrue
è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚

## ç¤ºä¾‹ 2ï¼š

![](./img/d2.png)

è¾“å…¥ï¼šhead = [1,2], pos = 0
è¾“å‡ºï¼štrue
è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚

## ç¤ºä¾‹ 3ï¼š

![](./img/d3.png)

è¾“å…¥ï¼šhead = [1], pos = -1
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚

# ğŸ’¯ğŸ’¯ğŸ’¯

### æœ€ä¼˜è§£æ³•ï¼šFloyd åˆ¤åœˆç®—æ³•ï¼ˆå¿«æ…¢æŒ‡é’ˆ / é¾Ÿå…”èµ›è·‘ï¼‰â€”â€” æ—¶é—´ O(n)ï¼Œç©ºé—´ O(1)

**çµé­‚æ€æƒ³**ï¼š

- ä¸€ä¸ªæŒ‡é’ˆèµ°å¾—å¿«ï¼ˆä¸€æ¬¡èµ°ä¸¤æ­¥ï¼‰â†’ å…”å­
- ä¸€ä¸ªæŒ‡é’ˆèµ°å¾—æ…¢ï¼ˆä¸€æ¬¡èµ°ä¸€æ­¥ï¼‰â†’ ä¹Œé¾Ÿ
- å¦‚æœæœ‰ç¯ â†’ å…”å­ç»ˆç©¶ä¼šè¿½ä¸Šä¹Œé¾Ÿï¼ˆåœ¨ç¯é‡Œç›¸é‡ï¼‰
- å¦‚æœæ²¡ç¯ â†’ å…”å­ä¼šå…ˆè·‘åˆ°ç»ˆç‚¹ï¼ˆnullï¼‰

```javascript
/**
 * Definition for singly-linked list.
 * function ListNode(val) {
 *     this.val = val;
 *     this.next = next;
 * }
 */

/**
 * @param {ListNode} head
 * @return {boolean}
 */
var hasCycle = function (head) {
  if (!head || !head.next) return false;

  let slow = head; // ä¹Œé¾Ÿ
  let fast = head.next; // å…”å­å…ˆèµ°ä¸€æ­¥ï¼Œé¿å…ä¸€å¼€å§‹å°±ç›¸ç­‰

  while (slow !== fast) {
    // å…”å­èµ°åˆ°å¤´äº† â†’ æ²¡ç¯
    if (!fast || !fast.next) {
      return false;
    }
    slow = slow.next; // èµ°ä¸€æ­¥
    fast = fast.next.next; // èµ°ä¸¤æ­¥
  }

  // èµ°åˆ°è¿™é‡Œè¯´æ˜ slow === fastï¼Œç›¸é‡äº† â†’ æœ‰ç¯ï¼
  return true;
};
```

### ç»“åˆç»å…¸æ¡ˆä¾‹è¯¦ç»†æ‰‹æ¨ï¼ˆè¶…çº§å½¢è±¡ï¼ï¼‰

#### æ¡ˆä¾‹ 1ï¼šæœ‰ç¯ï¼ˆpos = 1ï¼‰

```
é“¾è¡¨ï¼š1 â†’ 2 â†’ 3 â†’ 4 â†’ 5
           â†‘         â†“
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           å›åˆ°èŠ‚ç‚¹2ï¼ˆç´¢å¼•1ï¼‰
```

| è½®æ¬¡ | slow (ä¹Œé¾Ÿ) | fast (å…”å­)   | ä½ç½®è¯´æ˜             | æ˜¯å¦ç›¸é‡ |
| ---- | ----------- | ------------- | -------------------- | -------- |
| åˆå§‹ | 1           | 2             | å…”å­é¢†å…ˆä¸€æ­¥         | å¦       |
| 1    | â†’2          | â†’4            |                      | å¦       |
| 2    | â†’3          | â†’3ï¼ˆ4â†’5â†’2â†’3ï¼‰ | å…”å­ç»•äº†ä¸€åœˆå›åˆ° 3ï¼ | æ˜¯ï¼     |

â†’ slow å’Œ fast éƒ½åœ¨èŠ‚ç‚¹ 3 ç›¸é‡ â†’ è¿”å› true

#### æ¡ˆä¾‹ 2ï¼šæ— ç¯

```
1 â†’ 2 â†’ 3 â†’ 4 â†’ 5 â†’ null
```

| è½®æ¬¡             | slow | fast                     | è¯´æ˜            |
| ---------------- | ---- | ------------------------ | --------------- |
| åˆå§‹             | 1    | 2                        |                 |
| 1                | 2    | 4                        |                 |
| 2                | 3    | nullï¼ˆ4â†’5â†’nullï¼‰         | fast èµ°åˆ°å¤´äº†ï¼ |
| â†’ è¿›å…¥ if (!fast |      | !fast.next) â†’ è¿”å› false |

å®Œç¾ï¼

#### æ¡ˆä¾‹ 3ï¼šåªæœ‰ä¸¤ä¸ªèŠ‚ç‚¹æˆç¯

```
1 â†’ 2
â†‘   â†“
â””â”€â”€â”€â”˜
```

| è½®æ¬¡ | slow | fast       |
| ---- | ---- | ---------- |
| åˆå§‹ | 1    | 2          |
| 1    | 2    | 2ï¼ˆ2â†’1â†’2ï¼‰ |

â†’ ç¬¬ä¸€è½®å°±ç›¸é‡ â†’ è¿”å› true

### ä¸ºä»€ä¹ˆä¸èƒ½è®© fast å’Œ slow åŒæ—¶ä» head èµ·æ­¥ï¼Ÿ

å¯ä»¥ï¼ä½†è¦å°å¿ƒï¼å¦‚æœéƒ½ä» head èµ·æ­¥ï¼Œç¬¬ä¸€æ­¥å°±ä¼š `slow = head`, `fast = head.next.next` å¯èƒ½è¶Šç•Œã€‚

æ¨èå†™æ³•ï¼ˆæœ€å®‰å…¨ï¼ï¼‰ï¼š

```js
var hasCycle = function (head) {
  let slow = head;
  let fast = head;

  // æ³¨æ„æ¡ä»¶ï¼šfast å’Œ fast.next éƒ½è¦å­˜åœ¨
  while (fast && fast.next) {
    slow = slow.next;
    fast = fast.next.next;
    if (slow === fast) return true;
  }
  return false;
};
```

è¿™æ ·å†™æ›´ç®€æ´ã€æ›´ç»å…¸ã€æ›´ä¸å®¹æ˜“å‡ºé”™ï¼

### ç»ˆææ¨èç‰ˆæœ¬ï¼ˆé¢è¯•æ‰‹å†™ 100% ç¨³ï¼‰

```javascript
var hasCycle = function (head) {
  let slow = head;
  let fast = head;

  while (fast && fast.next) {
    slow = slow.next;
    fast = fast.next.next;
    if (slow === fast) {
      return true;
    }
  }

  return false;
};
```

### ç‰¹æ®Šæƒ…å†µéªŒè¯ï¼ˆé¢è¯•å®˜æœ€çˆ±é—®ï¼‰

| é“¾è¡¨æƒ…å†µ                | ç»“æœ  | è¯´æ˜                               |
| ----------------------- | ----- | ---------------------------------- |
| null                    | false | æ²¡èŠ‚ç‚¹å½“ç„¶æ²¡ç¯                     |
| å•ä¸ªèŠ‚ç‚¹ï¼Œæ— ç¯          | false |                                    |
| å•ä¸ªèŠ‚ç‚¹ï¼Œnext æŒ‡å‘è‡ªå·± | true  | fast ä¼šä¸€ç›´è½¬ï¼Œslow ä¹Ÿè½¬ï¼Œæœ€ç»ˆç›¸é‡ |
| ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œäº’ç›¸æŒ‡å‘      | true  | ç¬¬ä¸€è½®å°±ç›¸é‡                       |

å…¨å¯¹ï¼

### ç»å…¸é¢è¯•æ‰©å±•é¢˜ï¼ˆåŠ åˆ†é¡¹ï¼ï¼‰

å¦‚æœé¢è¯•å®˜ç»§ç»­é—®ï¼š

> â€œå¦‚æœæœ‰ç¯ï¼Œä½ èƒ½æ‰¾åˆ°ç¯çš„å…¥å£å—ï¼Ÿâ€ â†’ é‚£å°±æ˜¯ 142. ç¯å½¢é“¾è¡¨ II  
> â€œèƒ½ç®—å‡ºç¯çš„é•¿åº¦å—ï¼Ÿâ€ â†’ ç›¸é‡åè®©ä¸€ä¸ªæŒ‡é’ˆç»§ç»­èµ°ä¸€åœˆå°±è¡Œ

ä½† 141 è¿™é¢˜åªé—®â€œæœ‰æ²¡æœ‰â€ï¼Œå¿«æ…¢æŒ‡é’ˆç›´æ¥ç§’ï¼

### ä¸€å¥è¯æ€»ç»“ï¼ˆé¢è¯•é‡‘å¥ï¼‰

> â€œç”¨å¿«æ…¢æŒ‡é’ˆï¼Œåƒé¾Ÿå…”èµ›è·‘ä¸€æ ·ï¼Œå…”å­è·‘ä¸¤æ­¥ï¼Œä¹Œé¾Ÿè·‘ä¸€æ­¥ï¼Œ  
> å¦‚æœæœ‰ç¯ï¼Œå…”å­æ€»ä¼šè¿½ä¸Šä¹Œé¾Ÿç›¸é‡ï¼›æ²¡ç¯ï¼Œå…”å­å…ˆè·‘å‡ºå»ã€‚  
> æ—¶é—´ O(n)ï¼Œç©ºé—´ O(1)ï¼Œå®Œç¾ï¼â€

èƒŒä¼šè¿™ç‰ˆä»£ç  + è¿™ä¸ªæ¯”å–»ï¼Œä¸‹æ¬¡é¢è¯•é‡åˆ°ç¯å½¢é“¾è¡¨ï¼Œç›´æ¥ç§’æ€ï¼

```js
// æœ€ç»ˆèƒŒè¯µç‰ˆï¼ˆ8è¡Œè§£å†³ä¸€åˆ‡ï¼ï¼‰
var hasCycle = function (head) {
  let slow = head;
  let fast = head;
  while (fast && fast.next) {
    slow = slow.next;
    fast = fast.next.next;
    if (slow === fast) return true;
  }
  return false;
};
```