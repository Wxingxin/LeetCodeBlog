# æ’åºé“¾è¡¨

ç»™ä½ é“¾è¡¨çš„å¤´ç»“ç‚¹ `head` ï¼Œè¯·å°†å…¶æŒ‰ å‡åº æ’åˆ—å¹¶è¿”å› æ’åºåçš„é“¾è¡¨ ã€‚

## ç¤ºä¾‹ 1ï¼š

![](./img2/e1.png)

è¾“å…¥ï¼š`head = [4,2,1,3]`

è¾“å‡ºï¼š`[1,2,3,4]`

## ç¤ºä¾‹ 2ï¼š

!![](./img2/e2.png)

è¾“å…¥ï¼š`head = [-1,5,3,4,0]`

è¾“å‡ºï¼š`[-1,0,3,4,5]`

## ç¤ºä¾‹ 3ï¼š

è¾“å…¥ï¼š`head = []`

è¾“å‡ºï¼š`[]`

# Problem Solving

## ideas

1ï¸âƒ£ ä¸ºä»€ä¹ˆé€’å½’ç»ˆæ­¢æ˜¯ `head === null || head.next === null`ï¼Ÿ

- ç©ºé“¾è¡¨ï¼šä¸ç”¨æ’
- ä¸€ä¸ªèŠ‚ç‚¹ï¼šå·²ç»æœ‰åº
- å¦‚æœä¸åŠ è¿™ä¸ªæ¡ä»¶ï¼Œé€’å½’ä¼šæ— é™è¿›è¡Œ âŒ

---

2ï¸âƒ£ ä¸ºä»€ä¹ˆç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾ä¸­ç‚¹ï¼Ÿ

é“¾è¡¨ä¸èƒ½åƒæ•°ç»„é‚£æ ·ç”¨ç´¢å¼•ï¼Œåªèƒ½éå†ã€‚

å¿«æ…¢æŒ‡é’ˆåŸç†ï¼š

- fast æ¯æ¬¡èµ° 2 æ­¥
- slow æ¯æ¬¡èµ° 1 æ­¥
- fast åˆ°å°¾æ—¶ï¼Œslow åœ¨ä¸­ç‚¹

---

3ï¸âƒ£ ä¸ºä»€ä¹ˆä¸€å®šè¦ `prev.next = null`ï¼Ÿ

è¿™æ˜¯**å¾ˆå¤šäººå†™é”™çš„å…³é”®ç‚¹**ã€‚

ç›®çš„åªæœ‰ä¸€ä¸ªï¼š

> **æŠŠä¸€ä¸ªé“¾è¡¨æ‹†æˆä¸¤ä¸ªç‹¬ç«‹çš„é“¾è¡¨**

å¦åˆ™ï¼š

- å·¦åŠéƒ¨åˆ†è¿˜è¿ç€å³åŠéƒ¨åˆ†
- é€’å½’æ°¸è¿œæ‹†ä¸å¹²å‡€
- ç›´æ¥æ­»å¾ªç¯ ğŸ’¥

---

4ï¸âƒ£ ä¸ºä»€ä¹ˆé€’å½’æ’åºå·¦å³ï¼Ÿ

å½’å¹¶æ’åºçš„â€œè‡ªé¡¶å‘ä¸‹â€æœ¬è´¨æ˜¯ï¼š

```
å¤§é—®é¢˜
â†“
æ‹†æˆä¸¤ä¸ªå°é—®é¢˜
â†“
å†æ‹†
â†“
ç›´åˆ°æ¯ä¸ªå­é“¾è¡¨åªæœ‰ 1 ä¸ªèŠ‚ç‚¹
```

---

5ï¸âƒ£ ä¸ºä»€ä¹ˆåˆå¹¶å‡½æ•°è¿™ä¹ˆå†™ï¼Ÿ

å› ä¸ºï¼š

- å·¦è¾¹æ˜¯**æœ‰åºé“¾è¡¨**
- å³è¾¹æ˜¯**æœ‰åºé“¾è¡¨**
- ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œä»å°åˆ°å¤§æ¥å³å¯

è¿™ä¸€æ­¥æ˜¯ **O(n)** çš„ã€‚

---

# äº”ã€å®Œæ•´æ€è·¯æµç¨‹ï¼ˆç”¨ä¾‹å­èµ°ä¸€éï¼‰

è¾“å…¥ï¼š

```
4 -> 2 -> 1 -> 3
```

ç¬¬ 1 å±‚æ‹†åˆ†

```
4 -> 2   |   1 -> 3
```

ç¬¬ 2 å±‚

```
4 | 2    å’Œ    1 | 3
```

æ’åº + åˆå¹¶

```
2 -> 4
1 -> 3
```

æœ€ç»ˆåˆå¹¶

```
1 -> 2 -> 3 -> 4
```

## code

```js
/**
 * Definition for singly-linked list.
 * function ListNode(val, next) {
 *     this.val = (val===undefined ? 0 : val)
 *     this.next = (next===undefined ? null : next)
 * }
 */
/**
 * @param {ListNode} head
 * @return {ListNode}
 */
```

```js
var sortList = function (head) {
  // 1ï¸âƒ£ é€’å½’ç»ˆæ­¢æ¡ä»¶
  // ç©ºé“¾è¡¨ æˆ– åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæœ¬èº«å°±æ˜¯æœ‰åºçš„
  if (head === null || head.next === null) {
    return head;
  }

  // 2ï¸âƒ£ ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°é“¾è¡¨ä¸­ç‚¹
  let slow = head;
  let fast = head;
  let prev = null; // ç”¨æ¥æ–­å¼€é“¾è¡¨

  while (fast !== null && fast.next !== null) {
    prev = slow;
    slow = slow.next;
    fast = fast.next.next;
  }

  // æ­¤æ—¶ï¼š
  // slow æŒ‡å‘ä¸­ç‚¹
  // prev æ˜¯ä¸­ç‚¹å‰ä¸€ä¸ªèŠ‚ç‚¹
  // æ–­å¼€é“¾è¡¨
  prev.next = null;

  // 3ï¸âƒ£ é€’å½’æ’åºå·¦å³ä¸¤éƒ¨åˆ†
  let left = sortList(head); // å·¦åŠéƒ¨åˆ†
  let right = sortList(slow); // å³åŠéƒ¨åˆ†

  // 4ï¸âƒ£ åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨
  return merge(left, right);
};

function merge(l1, l2) {
  let dummy = new ListNode(0);
  let curr = dummy;

  while (l1 !== null && l2 !== null) {
    if (l1.val <= l2.val) {
      curr.next = l1;
      l1 = l1.next;
    } else {
      curr.next = l2;
      l2 = l2.next;
    }
    curr = curr.next;
  }

  // æŠŠå‰©ä½™éƒ¨åˆ†æ¥ä¸Š
  curr.next = l1 !== null ? l1 : l2;

  return dummy.next;
}
```

### æµ‹è¯•æ¡ˆä¾‹ï¼ˆå¼ºçƒˆå»ºè®®ä½ æ‹¿ç¬”è·Ÿç€ç”»ï¼ï¼‰

è¾“å…¥é“¾è¡¨ï¼š`4 â†’ 2 â†’ 1 â†’ 3`

ç›®æ ‡ï¼šæ’åºæˆ `1 â†’ 2 â†’ 2 â†’ 3 â†’ 4`

---

### ç¬¬ä¸€æ¬¡è°ƒç”¨ sortList(4â†’2â†’1â†’3)

```js
(slow = 4), (fast = 4);
```

#### å¿«æ…¢æŒ‡é’ˆæ‰¾ä¸­ç‚¹ï¼ˆwhile å¾ªç¯ï¼‰

| è½®æ¬¡ | slow  | fast         | prev     |
| ---- | ----- | ------------ | -------- |
| 1    | 4 â†’ 2 | 4 â†’ 1        | null â†’ 4 |
| 2    | 2 â†’ 1 | 1 â†’ 3 â†’ null | 4 â†’ 2    |

fast åˆ° nullï¼Œé€€å‡ºå¾ªç¯  
â†’ slow åœåœ¨ 1ï¼Œprev åœåœ¨ 2

```js
prev.next = null; // å…³é”®ï¼åˆ‡æ–­é“¾è¡¨
```

ç°åœ¨é“¾è¡¨è¢«åˆ‡æˆä¸¤æ®µï¼š

```
å·¦åŠéƒ¨åˆ†ï¼š4 â†’ 2 â†’ null     ï¼ˆhead åˆ° prevï¼‰
å³åŠéƒ¨åˆ†ï¼š1 â†’ 3 â†’ null     ï¼ˆslow å¼€å§‹ï¼‰
```

é€’å½’è°ƒç”¨ï¼š

```js
let left = sortList(4â†’2);        // é€’å½’1
let right = sortList(1â†’3);       // é€’å½’2
return merge(left, right);
```

---

### é€’å½’ 1ï¼šsortList(4â†’2)

å†æ¬¡æ‰¾ä¸­ç‚¹ï¼š

- slow ä» 4 å¼€å§‹ï¼Œfast ä» 4 å¼€å§‹
- ç¬¬ä¸€è½®ï¼šslow åˆ° 2ï¼Œfast åˆ° nullï¼ˆå› ä¸º 2.next=nullï¼‰
- é€€å‡ºå¾ªç¯ï¼Œprev = 4
- `prev.next = null`

åˆ‡æˆï¼š

```
å·¦ï¼š4 â†’ null
å³ï¼š2 â†’ null
```

ç»§ç»­é€’å½’ï¼š

```js
left = sortList(4) â†’ è¿”å› 4ï¼ˆå•ä¸ªèŠ‚ç‚¹ï¼‰
right = sortList(2) â†’ è¿”å› 2
```

åˆå¹¶ `4` å’Œ `2`ï¼š

```js
merge(4, 2):
curr æ¥ 2 â†’ curr æ¥ 4
è¿”å›ï¼š2 â†’ 4
```

æ‰€ä»¥ç¬¬ä¸€æ¬¡é€’å½’è¿”å›ï¼š`2 â†’ 4`

---

### é€’å½’ 2ï¼šsortList(1â†’3)

åŒç†ï¼š

- æ‰¾ä¸­ç‚¹ â†’ slow åœåœ¨ 3ï¼Œprev=1
- åˆ‡æ–­ â†’ å·¦ï¼š1ï¼Œå³ï¼š3
- é€’å½’åˆ°åº• â†’ åˆå¹¶å¾—åˆ°ï¼š`1 â†’ 3`

---

### å›åˆ°æœ€å¤–å±‚ï¼šmerge(2â†’4, 1â†’3)

```js
l1 = 2â†’4, l2 = 1â†’3
dummy â†’ ?

ç¬¬1æ­¥ï¼š1 < 2 â†’ æ¥1 â†’ l2=3
ç¬¬2æ­¥ï¼š2 < 3 â†’ æ¥2 â†’ l1=4
ç¬¬3æ­¥ï¼š3 < 4 â†’ æ¥3 â†’ l2=null
ç¬¬4æ­¥ï¼šæ¥å‰©ä½™çš„4
```

æœ€ç»ˆç»“æœï¼š`1 â†’ 2 â†’ 3 â†’ 4`

å®Œç¾ï¼

---

### å®Œæ•´é€’å½’è°ƒç”¨æ ‘ï¼ˆç”»å‡ºæ¥è¶…çº§æ¸…æ™°ï¼‰

```
             sortList(4â†’2â†’1â†’3)
                    /    \
         sortList(4â†’2)   sortList(1â†’3)
                /  \            /  \
          sortList(4) sortList(2)  sortList(1) sortList(3)
                \      /            \      /
              merge(2,4)         merge(1,3)
                      \             /
                     merge(2â†’4, 1â†’3)
                              |
                          1â†’2â†’3â†’4
```

è¿™å°±æ˜¯â€œåˆ†æ²»â€æ€æƒ³çš„æè‡´ä½“ç°ï¼

---

### ä¸¤ç§å½’å¹¶æ’åºå¯¹æ¯”ï¼ˆé¢è¯•å¿…é—®ï¼ï¼‰

| å¯¹æ¯”é¡¹            | è‡ªé¡¶å‘ä¸‹ï¼ˆä½ è¿™ç‰ˆï¼‰    | è‡ªåº•å‘ä¸Šï¼ˆä¸Šä¸€ç‰ˆï¼‰             |
| ----------------- | --------------------- | ------------------------------ |
| ä»£ç é•¿åº¦          | è¶…çŸ­ï¼ˆ30 è¡Œå·¦å³ï¼‰     | è¾ƒé•¿ï¼ˆ60+è¡Œï¼‰                  |
| ç†è§£éš¾åº¦          | ææ˜“ç†è§£ï¼ˆé€’å½’+åˆ†æ²»ï¼‰ | è¾ƒéš¾ï¼ˆæ­¥é•¿ã€åˆ‡é“¾è¡¨ã€æŒ‡é’ˆç®¡ç†ï¼‰ |
| æ—¶é—´å¤æ‚åº¦        | O(n log n)            | O(n log n)                     |
| ç©ºé—´å¤æ‚åº¦        | O(log n)ï¼ˆé€’å½’æ ˆï¼‰    | O(1)ï¼ˆçº¯å¾ªç¯ï¼‰                 |
| æ˜¯å¦é€šè¿‡ LeetCode | å®Œå…¨é€šè¿‡              | å®Œå…¨é€šè¿‡                       |
| é¢è¯•æ¨èåº¦        | 10/10ï¼ˆæœ€æ¨èï¼ï¼‰     | 8/10ï¼ˆè¿½æ±‚æè‡´è€…ç”¨ï¼‰           |

**ç»“è®ºï¼š99% çš„æƒ…å†µä¸‹ï¼Œä½ å°±å†™ä½ è¿™ç‰ˆå°±è¡Œï¼**

é¢è¯•å®˜é—®ä½ å†™è¿™ç‰ˆï¼Œä»–åªä¼šè¯´ï¼šâ€œå¾ˆå¥½ï¼Œæ€è·¯å¾ˆæ¸…æ™°â€ï¼Œç»ä¸ä¼šæ‰£ä½ ç©ºé—´å¤æ‚åº¦ã€‚

åªæœ‰æå°‘æ•°å…¬å¸ï¼ˆå¦‚å­—èŠ‚è·³åŠ¨ hardcore åœºï¼‰æ‰ä¼šè¿½é—®ï¼šâ€œä½ èƒ½åšåˆ° O(1) ç©ºé—´å—ï¼Ÿâ€

---

### é¢è¯•é»„é‡‘è¯æœ¯ï¼ˆèƒŒä¸‹æ¥ï¼ï¼‰

> é¢è¯•å®˜ï¼šä½ ä¼šæ€ä¹ˆæ’åºé“¾è¡¨ï¼Ÿ  
> æˆ‘ï¼šé“¾è¡¨æ’åºæœ€ä½³æ–¹æ¡ˆæ˜¯å½’å¹¶æ’åºï¼Œå› ä¸ºå®ƒå¤©ç„¶é€‚åˆé“¾è¡¨ï¼ˆä¸éœ€è¦éšæœºè®¿é—®ï¼‰ã€‚  
> æˆ‘ä¼šç”¨è‡ªé¡¶å‘ä¸‹çš„å½’å¹¶æ’åºï¼š
>
> 1. ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾ä¸­ç‚¹ï¼ŒæŠŠé“¾è¡¨ä¸€åˆ†ä¸ºäºŒ
> 2. é€’å½’æ’åºå·¦å³ä¸¤åŠ
> 3. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨  
>    æ—¶é—´ O(n log n)ï¼Œç©ºé—´ O(log n)ï¼Œä»£ç ç®€æ´ä¸”ç¨³å®šï¼Œæ˜¯å·¥ä¸šç•Œå’Œé¢è¯•ä¸­æœ€å¸¸ç”¨çš„å®ç°ã€‚

ç„¶åç°åœºæ‰‹æ’•ä½ è¿™æ®µä»£ç ï¼Œ3 åˆ†é’Ÿå†™å®Œï¼Œé¢è¯•å®˜ç›´æ¥æ‰“æ»¡åˆ†ï¼

---

è¿™é¢˜ä½ ç°åœ¨å·²ç»å®Œå…¨æŒæ¡äº†ï¼  
ä¸‹æ¬¡é¢è¯•é‡åˆ°â€œæ’åºé“¾è¡¨â€ï¼Œç›´æ¥ç”©å‡ºè‡ªé¡¶å‘ä¸‹å½’å¹¶ï¼Œç¨³ç¨³æ‹¿ä¸‹ï¼
